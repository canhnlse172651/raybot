import{_ as P}from"./index-Bdo4gFDM.js";import{u as J,g as Le,L as X,h as ke,A as Te}from"./index-BsvIc8xE.js";import{u as De,a as fe,b as Ce,_ as Ie,c as Ne,d as Ve,g as Z,e as ee,f as te,h as se,C as oe,S as Fe,Q as Pe,P as K,M as Be,A as he,i as Ge,j as Qe,k as We,l as ye,m as qe,n as ge,o as ve,E as xe,p as Oe,q as U,t as Ke,r as Ue,s as je,v as He,w as ze,x as Ye,y as Je,z as Xe}from"./PaginationPrev.vuevuetypescriptsetuptruelang-OL88O4o9.js";import{b as Ze,a as h,_ as et}from"./index-BDO0r7GB.js";import{d as v,c as f,o as r,w as s,a as ne,m as M,u as e,i as H,j as z,P as tt,O as st,Q as ot,R as nt,N as ce,g as t,p as g,D as T,s as c,l as n,y as W,v as x,S as G,I as O,J as at,k as Y,E as Se,F as q,h as Q,r as j,K as Ee}from"./index-DYEAPEMf.js";import{P as lt,c as Re,e as Ae,a as rt}from"./http-Bk75O8F8.js";import{_ as we,F as w,a as b,b as $,c as N,d as D,e as it,o as y,l as k,n as V,u as dt,s as _e,f as ut,t as mt}from"./FormMessage.vuevuetypescriptsetuptruelang-CsVJUIob.js";import{_ as ae,a as le}from"./CardContent.vuevuetypescriptsetuptruelang-Bk8uDLbz.js";import{_ as be}from"./CardFooter.vuevuetypescriptsetuptruelang-4A4iXB-D.js";import{a as re,_ as ie}from"./CardTitle.vuevuetypescriptsetuptruelang-BI9dkDq0.js";import{_ as de,a as ue,b as me,c as pe,d as B}from"./SelectValue.vuevuetypescriptsetuptruelang-Dco973bt.js";import{u as pt,f as ct}from"./check-BmO9U0QZ.js";/* empty css                                                              */import{L as _t,_ as ft}from"./PageContainer.vuevuetypescriptsetuptruelang-LAYE29TC.js";import{c as Ct,b as yt,_ as gt,a as vt}from"./TooltipTrigger.vuevuetypescriptsetuptruelang-CTJLhuJY.js";import"./RovingFocusGroup-kHIX2ArR.js";const xt=v({__name:"MenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(i){const d=i;return(o,l)=>(r(),f(e(lt),M(d,{role:"separator","aria-orientation":"horizontal"}),{default:s(()=>[ne(o.$slots,"default")]),_:3},16))}}),Ot=v({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(i){const d=i;return pt(),(o,l)=>(r(),f(e(xt),H(z(d)),{default:s(()=>[ne(o.$slots,"default")]),_:3},16))}});/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Re("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Re("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Rt=v({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(i){const d=i;return(o,l)=>(r(),f(e(Ct),H(z(d)),{default:s(()=>[ne(o.$slots,"default")]),_:3},16))}}),At={key:0},wt={class:"flex items-center justify-center py-8"},bt={key:1},$t={key:2,class:"mt-6 space-y-6"},Mt={class:"flex items-center justify-between"},Lt={class:"flex items-center gap-2"},kt={class:"text-sm font-medium"},Tt={class:"grid grid-cols-2 gap-4"},Dt={class:"font-medium"},It={class:"flex flex-col items-start gap-2"},Nt={key:0},Vt={class:"font-medium"},Ft={class:"space-y-2"},Pt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Bt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},ht={key:0,class:"space-y-2"},Gt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Qt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Wt={key:1,class:"space-y-2"},qt={class:"p-3 text-red-500 rounded-md bg-red-500/10"},Kt={class:"space-y-2"},Ut={class:"space-y-3"},jt={class:"flex justify-between text-sm"},Ht={key:0,class:"flex justify-between text-sm"},zt={key:1,class:"flex justify-between text-sm"},Yt={class:"flex justify-between text-sm"},Jt={class:"flex gap-2 pt-4"},Xt=1e3,Zt=v({__name:"CommandDetailSheet",props:tt({commandId:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(i){const d=i,o=st(i,"isOpen"),l=ot(d,"commandId"),{data:a,isPending:u,isError:R,refetch:S}=De(l,{axiosOpts:{doNotShowLoading:!0}}),{mutate:p}=fe(),{mutate:L}=Ce(),{openConfirmation:C}=J(),{pause:_,resume:I}=nt(()=>{S()},Xt,{immediate:!1});ce(a,A=>{A&&["SUCCEEDED","FAILED","CANCELED"].includes(A.status)?_():I()},{immediate:!0}),ce(o,A=>{A?I():_()},{immediate:!0});function E(){C({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{p(d.commandId,{onSuccess:()=>{O.success("Command removed from queue")},onError:A=>{A instanceof G?A.errorCode==="command.inProcessingCanNotBeDeleted"?O.error("Command is being processed and cannot be deleted"):O.error(A.message):O.error(A.message)}})},onCancel:()=>{}})}function F(){C({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{L(void 0,{onSuccess:()=>{O.success("Command cancelled successfully")},onError:A=>{A instanceof G?A.errorCode==="command.noCommandBeingProcessed"?O.error("No command is being processed"):O.error(A.message):O.error(A.message)}})},onCancel:()=>{}})}return(A,m)=>(r(),f(e(Le),{open:o.value,"onUpdate:open":m[0]||(m[0]=Me=>o.value=Me)},{default:s(()=>[t(e(ke),{class:"max-h-screen overflow-y-auto sm:max-w-xl"},{default:s(()=>[t(e(Ie),null,{default:s(()=>[t(e(Ne),null,{default:s(()=>m[1]||(m[1]=[c(" Command detail ")])),_:1,__:[1]}),t(e(Ve),null,{default:s(()=>m[2]||(m[2]=[c(" Real-time information about the selected command ")])),_:1,__:[2]})]),_:1}),e(u)?(r(),g("div",At,[n("div",wt,[t(e(X),{class:"w-8 h-8 animate-spin"})])])):e(R)?(r(),g("div",bt,m[3]||(m[3]=[n("div",{class:"flex items-center justify-center py-8"},[n("p",{class:"text-sm text-muted-foreground"}," Failed to load command details ")],-1)]))):e(a)?(r(),g("div",$t,[n("div",Mt,[n("div",Lt,[(r(),f(W(e(Z)(e(a).type)))),n("span",kt,x(e(ee)(e(a).type)),1)]),t(te,{status:e(a).status},null,8,["status"])]),n("div",Tt,[n("div",null,[m[4]||(m[4]=n("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),n("p",Dt,x(e(a).id),1)]),n("div",It,[m[5]||(m[5]=n("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),t(se,{source:e(a).source},null,8,["source"])]),e(a).completedAt&&e(a).startedAt?(r(),g("div",Nt,[m[6]||(m[6]=n("p",{class:"text-sm text-muted-foreground"}," Duration ",-1)),n("p",Vt,x(e(Ze)((new Date(e(a).completedAt).getTime()-new Date(e(a).startedAt).getTime())/1e3)),1)])):T("",!0)]),n("div",Ft,[m[7]||(m[7]=n("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),n("div",Pt,[n("span",Bt,x(JSON.stringify(e(a).inputs,null,4)),1)])]),e(a).status!=="PROCESSING"&&e(a).status!=="QUEUED"?(r(),g("div",ht,[m[8]||(m[8]=n("p",{class:"text-sm font-medium"}," Command Outputs ",-1)),n("div",Gt,[n("span",Qt,x(JSON.stringify(e(a).outputs,null,4)),1)])])):T("",!0),e(a).error?(r(),g("div",Wt,[m[9]||(m[9]=n("p",{class:"text-sm font-medium text-red-500"}," Error ",-1)),n("div",qt,x(e(a).error),1)])):T("",!0),n("div",Kt,[m[14]||(m[14]=n("p",{class:"text-sm font-medium"}," Timeline ",-1)),n("div",Ut,[n("div",jt,[m[10]||(m[10]=n("span",{class:"text-muted-foreground"},"Created",-1)),n("span",null,x(e(h)(e(a).createdAt)),1)]),e(a).startedAt?(r(),g("div",Ht,[m[11]||(m[11]=n("span",{class:"text-muted-foreground"},"Started",-1)),n("span",null,x(e(h)(e(a).startedAt)),1)])):T("",!0),e(a).completedAt?(r(),g("div",zt,[m[12]||(m[12]=n("span",{class:"text-muted-foreground"},"Completed",-1)),n("span",null,x(e(h)(e(a).completedAt)),1)])):T("",!0),n("div",Yt,[m[13]||(m[13]=n("span",{class:"text-muted-foreground"},"Last Updated",-1)),n("span",null,x(e(h)(e(a).updatedAt)),1)])])]),n("div",Jt,[e(a).status==="QUEUED"?(r(),f(e(P),{key:0,variant:"destructive",class:"flex-1",onClick:E},{default:s(()=>m[15]||(m[15]=[c(" Remove from queue ")])),_:1,__:[15]})):e(a).status==="PROCESSING"?(r(),f(e(P),{key:1,variant:"destructive",class:"flex-1",onClick:F},{default:s(()=>m[16]||(m[16]=[c(" Stop execution ")])),_:1,__:[16]})):(r(),f(e(P),{key:2,variant:"outline",class:"flex-1",disabled:""},{default:s(()=>m[17]||(m[17]=[c(" Re-run ")])),_:1,__:[17]}))])])):T("",!0)]),_:1})]),_:1},8,["open"]))}}),es="command-config",ts={moveTo:{direction:"FORWARD",motorSpeed:80},moveForward:{motorSpeed:80},moveBackward:{motorSpeed:80},cargoOpen:{motorSpeed:80},cargoClose:{motorSpeed:80},cargoLift:{motorSpeed:80,position:20},cargoLower:{motorSpeed:80,position:100}};function ss(){const i=at(es,ts),d=Y(()=>i.value),o={STOP_MOVEMENT:()=>{},MOVE_BACKWARD:a=>{i.value={...i.value,moveBackward:{motorSpeed:a.motorSpeed}}},MOVE_FORWARD:a=>{i.value={...i.value,moveForward:{motorSpeed:a.motorSpeed}}},MOVE_TO:a=>{i.value={...i.value,moveTo:{direction:a.direction,motorSpeed:a.motorSpeed}}},CARGO_OPEN:a=>{i.value={...i.value,cargoOpen:{motorSpeed:a.motorSpeed}}},CARGO_CLOSE:a=>{i.value={...i.value,cargoClose:{motorSpeed:a.motorSpeed}}},CARGO_LIFT:a=>{i.value={...i.value,cargoLift:{motorSpeed:a.motorSpeed,position:a.position}}},CARGO_LOWER:a=>{i.value={...i.value,cargoLower:{motorSpeed:a.motorSpeed,position:a.position}}},CARGO_CHECK_QR:()=>{},SCAN_LOCATION:()=>{},WAIT:()=>{}};function l(a,u){const R=o[a];R&&R(u)}return{commandConfig:d,updateCommandConfigFromInputs:l}}const os={class:"flex items-center gap-2"},ns=v({__name:"CommandTypeSelect",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},by:{type:[String,Function]},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(i,{emit:d}){const a=ct(i,d),u={STOP_MOVEMENT:{icon:Ge,label:"Stop Movement"},MOVE_FORWARD:{icon:Te,label:"Move Forward"},MOVE_BACKWARD:{icon:he,label:"Move Backward"},MOVE_TO:{icon:Be,label:"Move To"},CARGO_OPEN:{icon:K,label:"Cargo Open"},CARGO_CLOSE:{icon:K,label:"Cargo Close"},CARGO_LIFT:{icon:K,label:"Cargo Lift"},CARGO_LOWER:{icon:K,label:"Cargo Lower"},CARGO_CHECK_QR:{icon:Pe,label:"Cargo Check QR"},SCAN_LOCATION:{icon:Fe,label:"Scan Location"},WAIT:{icon:oe,label:"Wait"}};return(R,S)=>(r(),f(e(de),H(z(e(a))),{default:s(()=>[t(e(we),null,{default:s(()=>[t(e(ue),null,{default:s(()=>[t(e(me),{placeholder:"Select command type"})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[(r(),g(q,null,Se(u,(p,L)=>t(e(B),{key:L,value:L},{default:s(()=>[n("div",os,[(r(),f(W(p.icon),{class:"w-4 h-4"})),n("span",null,x(p.label),1)])]),_:2},1032,["value"])),64))]),_:1})]),_:1},16))}}),as=v({__name:"CargoCheckQRInputs",setup(i){return(d,o)=>(r(),f(e(w),{name:"inputs.qrCode"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("QR Code")])),_:1,__:[0]}),t(e(N),M(l,{type:"text",placeholder:"Enter QR code"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ls=v({__name:"CargoCloseInputs",setup(i){return(d,o)=>(r(),f(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),rs=v({__name:"CargoLiftInputs",setup(i){return(d,o)=>(r(),g(q,null,[t(e(w),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Lift position (cm)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter lift position"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),is=v({__name:"CargoLowerInputs",setup(i){return(d,o)=>(r(),g(q,null,[t(e(w),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Lower position (cm)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter lower position"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),ds=v({__name:"CargoOpenInputs",setup(i){return(d,o)=>(r(),f(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),us=v({__name:"MoveBackwardInputs",setup(i){return(d,o)=>(r(),f(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ms=v({__name:"MoveForwardInputs",setup(i){return(d,o)=>(r(),f(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ps={class:"flex items-center gap-2"},cs={class:"flex items-center gap-2"},_s=v({__name:"MoveToInputs",setup(i){return(d,o)=>(r(),g(q,null,[t(e(w),{name:"inputs.location"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Location")])),_:1,__:[0]}),t(e(N),M(l,{type:"text",placeholder:"Enter location"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(w),{name:"inputs.direction"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Move direction")])),_:1,__:[1]}),t(e(de),H(z(l)),{default:s(()=>[t(e(we),null,{default:s(()=>[t(e(ue),null,{default:s(()=>[t(e(me),{placeholder:"Select direction"})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[t(e(B),{value:"FORWARD"},{default:s(()=>[n("div",ps,[t(e(Et),{class:"w-4 h-4"}),o[2]||(o[2]=n("span",null,"Forward",-1))])]),_:1}),t(e(B),{value:"BACKWARD"},{default:s(()=>[n("div",cs,[t(e(St),{class:"w-4 h-4"}),o[3]||(o[3]=n("span",null,"Backward",-1))])]),_:1})]),_:1})]),_:2},1040)]),_:2},1024)]),_:1}),t(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[4]||(o[4]=[c("Motor Speed (0-100%)")])),_:1,__:[4]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),fs=v({__name:"WaitInputs",setup(i){return(d,o)=>(r(),f(e(w),{name:"inputs.durationMs"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Duration (ms)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter duration"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),Cs=v({__name:"DynamicInputs",props:{commandType:{}},setup(i){const d=i,o={MOVE_TO:_s,MOVE_FORWARD:ms,MOVE_BACKWARD:us,CARGO_OPEN:ds,CARGO_CLOSE:ls,CARGO_LIFT:rs,CARGO_LOWER:is,CARGO_CHECK_QR:as,WAIT:fs,STOP_MOVEMENT:null,SCAN_LOCATION:null},l=Y(()=>o[d.commandType]);return(a,u)=>e(l)?(r(),f(W(e(l)),{key:a.commandType})):T("",!0)}}),ys=it("type",[y({type:k("STOP_MOVEMENT"),inputs:y({}).default({})}),y({type:k("MOVE_TO"),inputs:y({location:_e(),direction:dt([k("FORWARD"),k("BACKWARD")]),motorSpeed:V().min(0).max(100)})}),y({type:k("MOVE_FORWARD"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:k("MOVE_BACKWARD"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:k("CARGO_OPEN"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:k("CARGO_CLOSE"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:k("CARGO_LIFT"),inputs:y({motorSpeed:V().min(0).max(100),position:V().min(0)})}),y({type:k("CARGO_LOWER"),inputs:y({motorSpeed:V().min(0).max(100),position:V().min(0)})}),y({type:k("CARGO_CHECK_QR"),inputs:y({qrCode:_e()})}),y({type:k("SCAN_LOCATION"),inputs:y({}).default({})}),y({type:k("WAIT"),inputs:y({durationMs:V()})})]),gs={class:"space-y-4"},vs=v({__name:"CreateCommandForm",setup(i){const d=Ae(),{values:o,handleSubmit:l,setFieldValue:a}=ut({validationSchema:mt(ys),initialValues:{type:"STOP_MOVEMENT",inputs:{}}}),u=Y(()=>o.type),{mutate:R,isPending:S}=Qe(),{commandConfig:p,updateCommandConfigFromInputs:L}=ss(),C=l(I=>{R(I,{onSuccess:()=>{O.success("Command created successfully"),d.invalidateQueries({queryKey:[We]}),d.invalidateQueries({queryKey:[ye]})},onError:E=>{E instanceof G?O.error({title:E.errorCode,message:E.message}):O.error("Failed to create command")}}),L(u.value,I.inputs)});function _(I){a("type",I);const F={MOVE_TO:p.value.moveTo,MOVE_FORWARD:p.value.moveForward,MOVE_BACKWARD:p.value.moveBackward,CARGO_OPEN:p.value.cargoOpen,CARGO_CLOSE:p.value.cargoClose,CARGO_LIFT:p.value.cargoLift,CARGO_LOWER:p.value.cargoLower}[I]??{};a("inputs",{...F})}return(I,E)=>(r(),f(e(ae),{class:"sticky top-6"},{default:s(()=>[t(e(re),null,{default:s(()=>[t(e(ie),null,{default:s(()=>E[2]||(E[2]=[c("Create command")])),_:1,__:[2]})]),_:1}),n("form",{onSubmit:E[1]||(E[1]=Q((...F)=>e(C)&&e(C)(...F),["prevent"]))},[t(e(le),null,{default:s(()=>[n("div",gs,[t(e(w),{name:"type"},{default:s(()=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>E[3]||(E[3]=[c("Command type")])),_:1,__:[3]}),t(ns,{disabled:e(S),"model-value":e(u),"onUpdate:modelValue":E[0]||(E[0]=F=>_(F))},null,8,["disabled","model-value"]),t(e(D))]),_:1})]),_:1}),t(Cs,{"command-type":e(u)},null,8,["command-type"])])]),_:1}),t(e(be),{class:"flex flex-col gap-2"},{default:s(()=>[t(e(P),{type:"submit",class:"w-full",disabled:e(S)},{default:s(()=>[e(S)?(r(),f(e(X),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):T("",!0),E[4]||(E[4]=c(" Create "))]),_:1,__:[4]},8,["disabled"])]),_:1})],32)]),_:1}))}}),$e=v({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(i){const d=i,o=Y(()=>{const{class:l,...a}=d;return a});return(l,a)=>(r(),f(e(Ot),M(o.value,{class:e(rt)("-mx-1 my-1 h-px bg-muted",d.class)}),null,16,["class"]))}}),xs={key:0},Os={class:"flex items-center justify-center gap-2 p-9"},Ss={class:"flex items-center justify-between"},Es={class:"flex items-center gap-2 font-medium"},Rs={class:"flex items-center gap-2 text-sm text-muted-foreground"},As={key:0,class:"text-sm"},ws={key:1,class:"text-sm"},bs=1e3,$s=v({__name:"CurrentProcessingCommandCard",emits:["viewDetails"],setup(i,{emit:d}){const o=d,l=Ae(),{openConfirmation:a}=J(),{data:u,isError:R}=qe({axiosOpts:{doNotShowLoading:!0},refetchInterval:bs}),{mutate:S,isPending:p}=Ce();function L(){a({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{S(void 0,{onSuccess:()=>{O.success("Command cancelled successfully"),l.setQueryData([ye],C=>({...C,status:"CANCELING"}))},onError:C=>{C instanceof G?C.errorCode==="command.noCommandBeingProcessed"?O.error("No command is being processed"):O.error(C.message):O.error(C.message)}})},onCancel:()=>{}})}return(C,_)=>e(u)&&!e(R)?(r(),f(e(ae),{key:0},{default:s(()=>[t(e(re),{class:"pb-3"},{default:s(()=>[t(e(ie),{class:"flex items-center justify-between"},{default:s(()=>[_[3]||(_[3]=n("span",null,"Current Command",-1)),t(te,{status:e(u).status},null,8,["status"])]),_:1,__:[3]})]),_:1}),t(e(le),null,{default:s(()=>[e(p)?(r(),g("div",xs,[n("div",Os,[t(e(_t),{class:"w-4 h-4 animate-spin"}),_[4]||(_[4]=n("span",null,"Cancelling command...",-1))])])):(r(),g("div",{key:1,class:"p-4 space-y-3 border rounded-lg cursor-pointer bg-muted/50",onClick:_[2]||(_[2]=I=>o("viewDetails",e(u).id))},[n("div",Ss,[n("div",Es,[(r(),f(W(e(Z)(e(u).type)),{class:"w-5 h-5"})),n("span",null,x(e(ee)(e(u).type)),1)]),n("div",{class:"flex items-center gap-2",onClick:_[1]||(_[1]=Q(()=>{},["stop"]))},[t(se,{source:e(u).source},null,8,["source"]),t(e(ge),null,{default:s(()=>[t(e(ve),{"as-child":""},{default:s(()=>[t(e(P),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(xe),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(Oe),{align:"end"},{default:s(()=>[t(e(U),{class:"cursor-pointer",onClick:_[0]||(_[0]=Q(I=>o("viewDetails",e(u).id),["stop"]))},{default:s(()=>_[5]||(_[5]=[c(" View details ")])),_:1,__:[5]}),t(e($e)),t(e(U),{class:"text-red-500 cursor-pointer",onClick:L},{default:s(()=>_[6]||(_[6]=[c(" Cancel command ")])),_:1,__:[6]})]),_:1})]),_:1})])]),n("div",Rs,[t(e(oe),{class:"w-4 h-4"}),n("span",null,"Started at: "+x(e(u).startedAt?e(h)(e(u).startedAt):"N/A"),1)]),e(u).type==="MOVE_TO"?(r(),g("div",As,[_[7]||(_[7]=n("span",{class:"font-medium"},"Location: ",-1)),c(" "+x(e(u).inputs.location),1)])):e(u).type==="CARGO_CHECK_QR"?(r(),g("div",ws,[_[8]||(_[8]=n("span",{class:"font-medium"},"QR Code: ",-1)),c(" "+x(e(u).inputs.qrCode),1)])):T("",!0)]))]),_:1})]),_:1})):T("",!0)}}),Ms={class:"flex items-center justify-between"},Ls={class:"flex items-center gap-2 font-medium"},ks={class:"flex items-center gap-2 text-sm text-muted-foreground"},Ts={key:0,class:"text-sm"},Ds={key:1,class:"text-sm"},Is=v({__name:"QueuedCommandItem",props:{command:{}},emits:["viewDetails","onRemove"],setup(i,{emit:d}){const o=i,l=d,{openConfirmation:a}=J(),{mutate:u}=fe();function R(){a({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{u(o.command.id,{onSuccess:()=>{O.success("Command removed from queue"),l("onRemove")},onError:S=>{S instanceof G?S.errorCode==="command.inProcessingCanNotBeDeleted"?O.error("Command is being processed and cannot be deleted"):O.error(S.message):O.error(S.message)}})},onCancel:()=>{}})}return(S,p)=>(r(),g("div",{class:"p-4 space-y-3 transition-colors border rounded-lg cursor-pointer bg-muted/30 border-border/50 hover:border-border",onClick:p[3]||(p[3]=L=>l("viewDetails",o.command.id))},[n("div",Ms,[n("div",Ls,[(r(),f(W(e(Z)(o.command.type)),{class:"w-5 h-5"})),n("span",null,x(e(ee)(o.command.type)),1)]),n("div",{class:"flex items-center gap-2",onClick:p[2]||(p[2]=Q(()=>{},["stop"]))},[t(te,{status:o.command.status},null,8,["status"]),t(se,{source:o.command.source},null,8,["source"]),t(e(ge),null,{default:s(()=>[t(e(ve),{"as-child":""},{default:s(()=>[t(e(P),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(xe),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),t(e(Oe),{align:"end",onClick:p[1]||(p[1]=Q(()=>{},["stop"]))},{default:s(()=>[t(e(U),{onClick:p[0]||(p[0]=L=>l("viewDetails",o.command.id))},{default:s(()=>p[4]||(p[4]=[c(" View details ")])),_:1,__:[4]}),t(e($e)),t(e(U),{class:"text-red-500",onClick:R},{default:s(()=>p[5]||(p[5]=[c(" Remove from queue ")])),_:1,__:[5]})]),_:1})]),_:1})])]),n("div",ks,[t(e(oe),{class:"w-4 h-4"}),n("span",null,"Created "+x(e(Ke)(o.command.createdAt)),1)]),o.command.type==="MOVE_TO"?(r(),g("div",Ts,[p[6]||(p[6]=n("span",{class:"font-medium"},"Location: ",-1)),c(" "+x(S.command.inputs.location),1)])):o.command.type==="CARGO_CHECK_QR"?(r(),g("div",Ds,[p[7]||(p[7]=n("span",{class:"font-medium"},"QR Code: ",-1)),c(" "+x(S.command.inputs.qrCode),1)])):T("",!0)]))}}),Ns={key:1,class:"py-6 text-center text-muted-foreground"},Vs={class:"flex items-center gap-1 text-sm text-muted-foreground"},Fs=1e3,Ps=v({__name:"WaitingCommandList",emits:["viewDetails"],setup(i,{emit:d}){const o=d,l=j(1),a=j(5),{data:u,refetch:R}=Ue(l,a,{axiosOpts:{doNotShowLoading:!0},refetchInterval:Fs});function S(){l.value=1}function p(L){l.value=L}return(L,C)=>e(u)?(r(),f(e(ae),{key:0},{default:s(()=>[t(e(re),{class:"pb-3"},{default:s(()=>[t(e(ie),{class:"flex items-center justify-between"},{default:s(()=>[C[1]||(C[1]=n("span",null,"Waiting Commands",-1)),t(e(et),{variant:"outline"},{default:s(()=>[c(x(e(u).totalItems)+" commands ",1)]),_:1})]),_:1,__:[1]})]),_:1}),t(e(le),{class:"space-y-3"},{default:s(()=>[e(u).totalItems>0?(r(!0),g(q,{key:0},Se(e(u).items,_=>(r(),f(Is,{key:_.id,command:_,onOnRemove:e(R),onViewDetails:I=>o("viewDetails",_.id)},null,8,["command","onOnRemove","onViewDetails"]))),128)):(r(),g("div",Ns," No commands in queue "))]),_:1}),t(e(be),{class:"flex items-center justify-between pt-4 border-t"},{default:s(()=>[n("div",Vs,[C[5]||(C[5]=n("span",{class:"text-sm sr-only sm:not-sr-only"}," Items per page: ",-1)),t(e(de),{modelValue:e(a),"onUpdate:modelValue":[C[0]||(C[0]=_=>Ee(a)?a.value=_:null),S]},{default:s(()=>[t(e(ue),{class:"w-16 h-8 ml-2"},{default:s(()=>[t(e(me),{placeholder:"5"})]),_:1}),t(e(pe),null,{default:s(()=>[t(e(B),{value:"5"},{default:s(()=>C[2]||(C[2]=[c(" 5 ")])),_:1,__:[2]}),t(e(B),{value:"10"},{default:s(()=>C[3]||(C[3]=[c(" 10 ")])),_:1,__:[3]}),t(e(B),{value:"20"},{default:s(()=>C[4]||(C[4]=[c(" 20 ")])),_:1,__:[4]})]),_:1})]),_:1},8,["modelValue"])]),t(e(je),{"sibling-count":1,"items-per-page":e(a),total:e(u).totalItems,"default-page":e(l),"onUpdate:page":p},{default:s(()=>[t(e(He),{class:"flex items-center gap-1"},{default:s(()=>[t(e(ze)),t(e(Ye)),t(e(Je)),t(e(Xe))]),_:1})]),_:1},8,["items-per-page","total","default-page"])]),_:1})]),_:1})):T("",!0)}}),Bs={class:"flex items-center justify-between"},hs={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},Gs={class:"space-y-6 md:col-span-2"},no=v({__name:"CommandQueueView",setup(i){const d=j(!1),o=j(null);function l(a){o.value=a,d.value=!0}return(a,u)=>(r(),f(ft,null,{default:s(()=>[n("div",Bs,[u[2]||(u[2]=n("div",null,[n("h1",{class:"text-xl font-semibold tracking-tight"}," Robot command queue "),n("p",{class:"text-sm text-muted-foreground"}," Manage and monitor robot commands in real-time ")],-1)),t(e(Rt),null,{default:s(()=>[t(e(yt),null,{default:s(()=>[t(e(gt),{"as-child":""},{default:s(()=>[t(e(P),{variant:"outline",size:"icon"},{default:s(()=>[t(e(X),{class:"w-4 h-4 animate-spin"})]),_:1})]),_:1}),t(e(vt),null,{default:s(()=>u[1]||(u[1]=[n("p",null,"Refreshing in real-time",-1)])),_:1,__:[1]})]),_:1})]),_:1})]),n("div",hs,[n("div",Gs,[t($s,{onViewDetails:l}),t(Ps,{onViewDetails:l})]),n("div",null,[t(vs)])]),e(o)?(r(),f(Zt,{key:0,"is-open":e(d),"onUpdate:isOpen":u[0]||(u[0]=R=>Ee(d)?d.value=R:null),"command-id":e(o)},null,8,["is-open","command-id"])):T("",!0)]),_:1}))}});export{no as default};
