import{g as ne,h as le,A as re,C as ie}from"./index-CcgEifhO.js";import{s as de,_ as ce,c as me,d as ue,g as pe,e as q,f as fe,h as ge,A as _e,a as xe,o as z,E as ye,p as F,q as Ce,n as K,C as U,v as he}from"./DropdownMenuTrigger.vuevuetypescriptsetuptruelang-BKv9Wvsd.js";import{b as be,a as w}from"./date-W8Ww_3Ys.js";import{d as y,r as S,c as p,o as l,w as r,g as d,u as e,a as $,m as G,i as Q,j as H,k as ve,l as o,Q as Se,P as we,s as h,p as x,D as v,y as O,v as f,q as A,h as Ee,T as Ae,J as N,X as g,F as ke,E as $e,Y as Ie,Z as De,L as Ne,H as Ve}from"./index-BWQiikOf.js";import{_ as k}from"./index-CvEIS6KB.js";import{P as Ue,c as Le,a as L}from"./http-Z9rgl52c.js";import{u as Pe}from"./confirmation-store-PDxi_0BG.js";import{_ as J,C as Be}from"./index-D0u9ezh_.js";import{C as P}from"./circle-alert-Dx4xwqRq.js";import{_ as Oe}from"./DataTable.vuevuetypescriptsetuptruelang-B7Fb9BNZ.js";import{c as Me,a as Re,i as Te,u as X,d as je}from"./useForwardPropsEmits-BdCRpJMf.js";import{g as Y,i as B,P as qe,C as ze}from"./check-CQqiH5K1.js";import{C as Fe}from"./SelectValue.vuevuetypescriptsetuptruelang-DIL7_Wf9.js";import{_ as Ke,L as Ge}from"./PageContainer.vuevuetypescriptsetuptruelang-BMnOwmiV.js";import{R as Qe}from"./refresh-cw-W9-Cl0tn.js";import"./RovingFocusGroup-BbHuxOEQ.js";import"./PaginationPrev.vuevuetypescriptsetuptruelang-DSVlvR2e.js";import"./SelectGroup.vuevuetypescriptsetuptruelang-vQTZ7daw.js";import"./useFormControl-lm5GEZvp.js";const[He,Je]=Me(["MenuCheckboxItem","MenuRadioItem"],"MenuItemIndicatorContext"),Xe=y({__name:"MenuItemIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(a){const s=He({modelValue:S(!1)});return(n,c)=>(l(),p(e(qe),{present:n.forceMount||e(B)(e(s).modelValue.value)||e(s).modelValue.value===!0},{default:r(()=>[d(e(Ue),{as:n.as,"as-child":n.asChild,"data-state":e(Y)(e(s).modelValue.value)},{default:r(()=>[$(n.$slots,"default")]),_:3},8,["as","as-child","data-state"])]),_:3},8,["present"]))}}),Ye=y({__name:"MenuCheckboxItem",props:{modelValue:{type:[Boolean,String],default:!1},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select","update:modelValue"],setup(a,{emit:s}){const n=a,c=s,t=Re(n,"modelValue",c);return Je({modelValue:t}),(i,m)=>(l(),p(de,G({role:"menuitemcheckbox"},n,{"aria-checked":e(B)(e(t))?"mixed":e(t),"data-state":e(Y)(e(t)),onSelect:m[0]||(m[0]=async C=>{c("select",C),e(B)(e(t))?t.value=!0:t.value=!e(t)})}),{default:r(()=>[$(i.$slots,"default",{modelValue:e(t)})]),_:3},16,["aria-checked","data-state"]))}}),Ze=y({__name:"DropdownMenuCheckboxItem",props:{modelValue:{type:[Boolean,String]},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select","update:modelValue"],setup(a,{emit:s}){const n=a,t=Te(s);return X(),(i,m)=>(l(),p(e(Ye),Q(H({...n,...e(t)})),{default:r(()=>[$(i.$slots,"default")]),_:3},16))}}),We=y({__name:"DropdownMenuItemIndicator",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(a){const s=a;return X(),(n,c)=>(l(),p(e(Xe),Q(H(s)),{default:r(()=>[$(n.$slots,"default")]),_:3},16))}});/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=Le("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),tt={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},st=y({__name:"DropdownMenuCheckboxItem",props:{modelValue:{type:[Boolean,String]},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},emits:["select","update:modelValue"],setup(a,{emit:s}){const n=a,c=s,t=ve(()=>{const{class:m,...C}=n;return C}),i=je(t,c);return(m,C)=>(l(),p(e(Ze),G(e(i),{class:e(L)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n.class)}),{default:r(()=>[o("span",tt,[d(e(We),null,{default:r(()=>[d(e(ze),{class:"w-4 h-4"})]),_:1})]),$(m.$slots,"default")]),_:3},16,["class"]))}}),at={class:"mt-6 space-y-6"},ot={class:"flex items-center justify-between"},nt={class:"flex items-center gap-2"},lt={class:"text-sm font-medium"},rt={class:"grid grid-cols-2 gap-4"},it={class:"font-medium"},dt={class:"flex flex-col items-start gap-2"},ct={key:0},mt={class:"font-medium"},ut={class:"space-y-2"},pt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},ft={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},gt={key:0,class:"space-y-2"},_t={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},xt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},yt={key:1,class:"space-y-2"},Ct={class:"p-3 text-red-500 rounded-md bg-red-500/10"},ht={class:"space-y-2"},bt={class:"space-y-3"},vt={class:"flex justify-between text-sm"},St={key:0,class:"flex justify-between text-sm"},wt={key:1,class:"flex justify-between text-sm"},Et={class:"flex justify-between text-sm"},At=y({__name:"CommandDetailSheet",props:Se({command:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(a){const s=a,n=we(a,"isOpen");return(c,t)=>(l(),p(e(ne),{open:n.value,"onUpdate:open":t[0]||(t[0]=i=>n.value=i)},{default:r(()=>[d(e(le),{class:"max-h-screen overflow-y-auto sm:max-w-xl"},{default:r(()=>[d(e(ce),null,{default:r(()=>[d(e(me),null,{default:r(()=>t[1]||(t[1]=[h(" Command detail ")])),_:1,__:[1]}),d(e(ue),null,{default:r(()=>t[2]||(t[2]=[h(" Information about the selected command ")])),_:1,__:[2]})]),_:1}),o("div",at,[o("div",ot,[o("div",nt,[(l(),p(O(e(pe)(s.command.type)))),o("span",lt,f(e(q)(s.command.type)),1)]),d(fe,{status:s.command.status},null,8,["status"])]),o("div",rt,[o("div",null,[t[3]||(t[3]=o("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),o("p",it,f(s.command.id),1)]),o("div",dt,[t[4]||(t[4]=o("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),d(ge,{source:s.command.source},null,8,["source"])]),s.command.completedAt&&s.command.startedAt?(l(),x("div",ct,[t[5]||(t[5]=o("p",{class:"text-sm text-muted-foreground"}," Duration ",-1)),o("p",mt,f(e(be)((new Date(s.command.completedAt).getTime()-new Date(s.command.startedAt).getTime())/1e3)),1)])):v("",!0)]),o("div",ut,[t[6]||(t[6]=o("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),o("div",pt,[o("span",ft,f(JSON.stringify(s.command.inputs,null,4)),1)])]),s.command.status!=="PROCESSING"&&s.command.status!=="QUEUED"?(l(),x("div",gt,[t[7]||(t[7]=o("p",{class:"text-sm font-medium"}," Command Outputs ",-1)),o("div",_t,[o("span",xt,f(JSON.stringify(s.command.outputs,null,4)),1)])])):v("",!0),s.command.error?(l(),x("div",yt,[t[8]||(t[8]=o("p",{class:"text-sm font-medium text-red-500"}," Error ",-1)),o("div",Ct,f(s.command.error),1)])):v("",!0),o("div",ht,[t[13]||(t[13]=o("p",{class:"text-sm font-medium"}," Timeline ",-1)),o("div",bt,[o("div",vt,[t[9]||(t[9]=o("span",{class:"text-muted-foreground"},"Created",-1)),o("span",null,f(e(w)(s.command.createdAt)),1)]),s.command.startedAt?(l(),x("div",St,[t[10]||(t[10]=o("span",{class:"text-muted-foreground"},"Started",-1)),o("span",null,f(e(w)(s.command.startedAt)),1)])):v("",!0),s.command.completedAt?(l(),x("div",wt,[t[11]||(t[11]=o("span",{class:"text-muted-foreground"},"Completed",-1)),o("span",null,f(e(w)(s.command.completedAt)),1)])):v("",!0),o("div",Et,[t[12]||(t[12]=o("span",{class:"text-muted-foreground"},"Last Updated",-1)),o("span",null,f(e(w)(s.command.updatedAt)),1)])])])])]),_:1})]),_:1},8,["open"]))}}),kt={inheritAttrs:!1},b=y({...kt,__name:"DataTableSortableHeader",props:{column:{},title:{}},setup(a){const s=a;function n(t){return t==="asc"?re:t==="desc"?_e:et}function c(t){t.shiftKey?s.column.toggleSorting(s.column.getIsSorted()==="asc",!0):s.column.toggleSorting(s.column.getIsSorted()==="asc",!1)}return(t,i)=>t.column.getCanSort()?(l(),x("div",{key:0,class:A(e(L)("flex items-center space-x-2",t.$attrs.class??""))},[d(e(k),{class:"h-8 -ml-3",size:"sm",variant:"ghost",onClick:c},{default:r(()=>[h(f(s.title)+" ",1),(l(),p(O(n(t.column.getIsSorted())),{class:"w-4 h-4"}))]),_:1})],2)):(l(),x("div",{key:1,class:A(e(L)("flex items-center text-xs",t.$attrs.class??""))},f(t.title),3))}}),$t=y({__name:"CommandActionDropdownMenu",props:{command:{}},setup(a){const s=a,{openConfirmation:n}=Pe(),{mutate:c}=xe();function t(){n({title:"Remove command",description:"Are you sure you want to remove this command from history?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{c(s.command.id,{onSuccess:()=>{N.success("Command removed from history")},onError:i=>{i instanceof Ae?i.errorCode==="command.inProcessingCanNotBeDeleted"?N.error("Command is being processed and cannot be deleted"):N.error(i.message):N.error(i.message)}})},onCancel:()=>{}})}return(i,m)=>(l(),p(e(K),null,{default:r(()=>[d(e(z),{"as-child":""},{default:r(()=>[d(e(k),{variant:"ghost",size:"icon",class:"w-8 h-8",onClick:m[0]||(m[0]=Ee(()=>{},["stop"]))},{default:r(()=>[d(e(ye),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),d(e(F),{align:"end"},{default:r(()=>[d(e(Ce),{class:"text-red-500",disabled:i.command.status==="PROCESSING",onClick:t},{default:r(()=>m[1]||(m[1]=[h(" Remove from history ")])),_:1,__:[1]},8,["disabled"])]),_:1})]),_:1}))}}),It=y({__name:"SourceBadge",props:{source:{}},setup(a){const s=a,n={CLOUD:"Cloud",APP:"Application"},c={CLOUD:"bg-purple-500/10 text-purple-500 hover:bg-purple-500/20",APP:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20"},t=n[s.source],i=c[s.source];return(m,C)=>(l(),p(e(J),{class:A(e(i))},{default:r(()=>[h(f(e(t)),1)]),_:1},8,["class"]))}}),Dt=y({__name:"StatusBadge",props:{status:{}},setup(a){const s=a,n={QUEUED:"Queued",PROCESSING:"Processing",CANCELING:"Canceling",SUCCEEDED:"Succeeded",FAILED:"Failed",CANCELED:"Canceled"},c={QUEUED:"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20",PROCESSING:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20",CANCELING:"bg-amber-500/10 text-amber-500 hover:bg-amber-500/20",SUCCEEDED:"bg-green-500/10 text-green-500 hover:bg-green-500/20",FAILED:"bg-red-500/10 text-red-500 hover:bg-red-500/20",CANCELED:"bg-gray-500/10 text-gray-500 hover:bg-gray-500/20"},t={QUEUED:U,PROCESSING:U,CANCELING:U,SUCCEEDED:ie,FAILED:P,CANCELED:Be},i=n[s.status],m=c[s.status],C=t[s.status];return(E,I)=>(l(),p(e(J),{class:A(e(m))},{default:r(()=>[(l(),p(O(e(C)),{class:"w-4 h-4 mr-2"})),h(" "+f(e(i)),1)]),_:1},8,["class"]))}}),Nt=[{accessorKey:"id",header:({column:a})=>g(b,{column:a,title:"ID"}),enableSorting:!1},{accessorKey:"type",header:({column:a})=>g(b,{column:a,title:"Type"}),cell:({row:a})=>q(a.original.type)},{accessorKey:"status",header:({column:a})=>g(b,{column:a,title:"Status"}),cell:({row:a})=>g(Dt,{key:a.original.id+a.original.status,status:a.original.status})},{accessorKey:"source",header:({column:a})=>g(b,{column:a,title:"Source"}),cell:({row:a})=>g(It,{key:a.original.id+a.original.source,source:a.original.source})},{accessorKey:"inputs",header:({column:a})=>g(b,{column:a,title:"Inputs"}),cell:({row:a})=>{const s=a.original.inputs;return g("pre",{class:"text-xs overflow-auto max-h-32 whitespace-pre-wrap",style:"max-width: 300px;"},JSON.stringify(s,null,2))},enableSorting:!1},{accessorKey:"outputs",header:({column:a})=>g(b,{column:a,title:"Outputs"}),cell:({row:a})=>{const s=a.original.outputs;return g("pre",{class:"text-xs overflow-auto max-h-32 truncate",style:"max-width: 300px;"},JSON.stringify(s,null,2))},enableSorting:!1},{accessorKey:"error",header:({column:a})=>g(b,{column:a,title:"Error"}),cell:({row:a})=>{const s=a.original.error;return s?g("div",{class:"text-red-500 truncate",style:"max-width: 300px;",title:s},s):"-"},enableSorting:!1},{accessorKey:"createdAt",header:({column:a})=>g(b,{column:a,title:"Created At"}),cell:({row:a})=>w(a.original.createdAt)},{accessorKey:"completedAt",header:({column:a})=>g(b,{column:a,title:"Completed At"}),cell:({row:a})=>{const s=a.original.completedAt;return s?w(s):"-"}},{accessorKey:"action",header:"Action",cell:({row:a})=>g($t,{command:a.original})}],Vt=y({__name:"DataTableColumnVisibility",props:{table:{}},setup(a){const s=a;return(n,c)=>(l(),p(e(K),null,{default:r(()=>[d(e(z),{"as-child":""},{default:r(()=>[d(e(k),{variant:"outline",class:"ml-auto"},{default:r(()=>[c[0]||(c[0]=h(" Columns ")),d(e(Fe),{class:"w-4 h-4 ml-2"})]),_:1,__:[0]})]),_:1}),d(e(F),{align:"end"},{default:r(()=>[(l(!0),x(ke,null,$e(s.table.getAllColumns().filter(t=>t.getCanHide()),t=>(l(),p(e(st),{key:t.id,class:"capitalize","model-value":t.getIsVisible(),"onUpdate:modelValue":i=>{t.toggleVisibility(!!i)}},{default:r(()=>[h(f(t.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1}))}}),Ut={key:0,class:"flex flex-col items-center justify-center gap-4 pt-20"},Lt={class:"flex items-center gap-4"},Pt={key:1,class:"flex flex-col items-center justify-center gap-4 pt-20"},Bt={class:"flex flex-col items-center gap-4 p-6 text-red-500"},Ot={class:"space-y-2 text-center"},Mt={class:"text-sm text-muted-foreground"},Rt={key:2,class:"flex flex-col items-center justify-center gap-4 pt-20"},Tt={class:"flex flex-col items-center gap-4 p-6"},jt={key:3,class:"flex flex-col w-full"},qt={class:"flex items-center justify-between mb-6"},zt={class:"flex items-center gap-2"},ds=y({__name:"CommandHistoryView",setup(a){const s=De(),n=Ve(),c=Ie("table"),t=S(null),i=S(!1),m=S(Number(s.query.page)||1),C=S(Number(s.query.pageSize)||10),E=S(s.query.sorts?s.query.sorts.split(","):["-created_at"]),{data:I,isPending:M,isFetching:V,isError:Z,error:W,refetch:ee}=he(m,C,E);function te(_){E.value=_,n.replace({query:{...s.query,sorts:_.length?_.join(","):void 0}})}function se(_){m.value=_,n.replace({query:{...s.query,page:_.toString()}})}function ae(_){C.value=_,m.value=1,n.replace({query:{...s.query,pageSize:_.toString(),page:"1"}})}function oe(_){t.value=_,i.value=!0}return(_,u)=>(l(),p(Ke,null,{default:r(()=>{var R,T;return[e(M)?(l(),x("div",Ut,[o("div",Lt,[d(e(Ge),{class:"w-8 h-8 animate-spin text-muted-foreground"})]),u[3]||(u[3]=o("p",{class:"text-lg text-muted-foreground"}," Loading commands... ",-1))])):e(Z)?(l(),x("div",Pt,[o("div",Bt,[d(e(P),{class:"w-8 h-8"}),o("div",Ot,[u[4]||(u[4]=o("h2",{class:"text-lg font-semibold"}," Failed to load commands ",-1)),o("p",Mt,f(((R=e(W))==null?void 0:R.message)||"An unexpected error occurred"),1)])])])):e(I)?(l(),x("div",jt,[o("div",qt,[u[8]||(u[8]=o("div",null,[o("h1",{class:"text-xl font-semibold tracking-tight"}," Commands "),o("p",{class:"text-sm text-muted-foreground"}," View and manage robot commands ")],-1)),o("div",zt,[(T=e(c))!=null&&T.table?(l(),p(Vt,{key:0,table:e(c).table},null,8,["table"])):v("",!0),d(e(k),{variant:"outline",disabled:e(V)||!e(E).length,onClick:u[0]||(u[0]=()=>{var D,j;return(j=(D=e(c))==null?void 0:D.table)==null?void 0:j.resetSorting()})},{default:r(()=>u[6]||(u[6]=[h(" Clear Sort ")])),_:1,__:[6]},8,["disabled"]),d(e(k),{variant:"outline",disabled:e(V),onClick:u[1]||(u[1]=()=>e(ee)())},{default:r(()=>[d(e(Qe),{class:A(["w-4 h-4 mr-2",{"animate-spin":e(V)}])},null,8,["class"]),u[7]||(u[7]=h(" Refresh "))]),_:1,__:[7]},8,["disabled"])])]),d(Oe,{ref:"table","initial-state":{columnVisibility:{error:!1,outputs:!1}},page:e(m),"page-size":e(C),columns:e(Nt),data:e(I).items,"total-items":e(I).totalItems,"is-loading":e(M),sorts:e(E),onSorts:te,"onUpdate:page":se,"onUpdate:pageSize":ae,onRowClick:oe},null,8,["page","page-size","columns","data","total-items","is-loading","sorts"])])):(l(),x("div",Rt,[o("div",Tt,[d(e(P),{class:"w-8 h-8 text-muted-foreground"}),u[5]||(u[5]=o("div",{class:"space-y-2 text-center"},[o("h2",{class:"text-lg font-semibold"}," No commands found "),o("p",{class:"text-sm text-muted-foreground"}," There are no commands to display ")],-1))])])),e(t)?(l(),p(At,{key:4,"is-open":e(i),"onUpdate:isOpen":u[2]||(u[2]=D=>Ne(i)?i.value=D:null),command:e(t)},null,8,["is-open","command"])):v("",!0)]}),_:1}))}});export{ds as default};
