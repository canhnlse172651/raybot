import{_ as P}from"./index-Cn8JYhWe.js";import{u as J,g as Me,L as X,h as Le,A as Te}from"./index-Dnw8uNgz.js";import{u as ke,a as fe,b as Ce,_ as De,c as Ie,d as Ne,g as Z,e as ee,f as te,h as se,C as oe,S as Ve,Q as Fe,i as Pe,j as Be,k as Ge,l as ye,m as Qe,n as ge,o as ve,E as xe,p as Oe,q,t as We,r as he,s as Ke,v as Ue,w as qe,x as je,y as He,z as ze}from"./PaginationPrev.vuevuetypescriptsetuptruelang-DnbUuxj_.js";import{f as Ye,a as G,P as U,M as Je,A as Xe,_ as Ze}from"./date-CbpCVIuu.js";import{d as v,c as f,o as i,w as s,a as ne,m as M,u as e,i as H,j as z,P as et,Q as tt,R as st,S as ot,M as ce,g as t,p as g,D as k,s as c,l as n,y as h,v as x,T as Q,I as O,J as nt,k as Y,E as Se,F as K,h as W,r as j,K as Ee}from"./index-CXAYBSVx.js";import{P as at,e as Re,a as lt}from"./http-D4Je9GED.js";import{_ as Ae,F as b,a as w,b as $,c as N,d as D,e as it,o as y,l as T,n as V,u as rt,s as _e,f as dt,t as ut}from"./FormMessage.vuevuetypescriptsetuptruelang-RSjq3E0G.js";import{_ as ae,a as le}from"./CardContent.vuevuetypescriptsetuptruelang-B9A7Natr.js";import{_ as be}from"./CardFooter.vuevuetypescriptsetuptruelang-DR0brbFF.js";import{b as mt,A as pt,_ as ie,a as re}from"./CardTitle.vuevuetypescriptsetuptruelang-BwLn8GT2.js";import{_ as de,a as ue,b as me,c as pe,d as B}from"./SelectValue.vuevuetypescriptsetuptruelang-DB03SfWN.js";import{u as ct,f as _t}from"./check-BkU-WFoY.js";/* empty css                                                              */import{L as ft,_ as Ct}from"./PageContainer.vuevuetypescriptsetuptruelang-BSaaIMbv.js";import{c as yt,b as gt,_ as vt,a as xt}from"./TooltipTrigger.vuevuetypescriptsetuptruelang-C887NyCO.js";const Ot=v({__name:"MenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(r){const d=r;return(o,l)=>(i(),f(e(at),M(d,{role:"separator","aria-orientation":"horizontal"}),{default:s(()=>[ne(o.$slots,"default")]),_:3},16))}}),St=v({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(r){const d=r;return ct(),(o,l)=>(i(),f(e(Ot),H(z(d)),{default:s(()=>[ne(o.$slots,"default")]),_:3},16))}}),Et=v({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(r){const d=r;return(o,l)=>(i(),f(e(yt),H(z(d)),{default:s(()=>[ne(o.$slots,"default")]),_:3},16))}}),Rt={key:0},At={class:"flex items-center justify-center py-8"},bt={key:1},wt={key:2,class:"mt-6 space-y-6"},$t={class:"flex items-center justify-between"},Mt={class:"flex items-center gap-2"},Lt={class:"text-sm font-medium"},Tt={class:"grid grid-cols-2 gap-4"},kt={class:"font-medium"},Dt={class:"flex flex-col items-start gap-2"},It={key:0},Nt={class:"font-medium"},Vt={class:"space-y-2"},Ft={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Pt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Bt={key:0,class:"space-y-2"},Gt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Qt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Wt={key:1,class:"space-y-2"},ht={class:"p-3 text-red-500 rounded-md bg-red-500/10"},Kt={class:"space-y-2"},Ut={class:"space-y-3"},qt={class:"flex justify-between text-sm"},jt={key:0,class:"flex justify-between text-sm"},Ht={key:1,class:"flex justify-between text-sm"},zt={class:"flex justify-between text-sm"},Yt={class:"flex gap-2 pt-4"},Jt=1e3,Xt=v({__name:"CommandDetailSheet",props:et({commandId:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(r){const d=r,o=tt(r,"isOpen"),l=st(d,"commandId"),{data:a,isPending:u,isError:R,refetch:S}=ke(l,{axiosOpts:{doNotShowLoading:!0}}),{mutate:p}=fe(),{mutate:L}=Ce(),{openConfirmation:C}=J(),{pause:_,resume:I}=ot(()=>{S()},Jt,{immediate:!1});ce(a,A=>{A&&["SUCCEEDED","FAILED","CANCELED"].includes(A.status)?_():I()},{immediate:!0}),ce(o,A=>{A?I():_()},{immediate:!0});function E(){C({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{p(d.commandId,{onSuccess:()=>{O.success("Command removed from queue")},onError:A=>{A instanceof Q?A.errorCode==="command.inProcessingCanNotBeDeleted"?O.error("Command is being processed and cannot be deleted"):O.error(A.message):O.error(A.message)}})},onCancel:()=>{}})}function F(){C({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{L(void 0,{onSuccess:()=>{O.success("Command cancelled successfully")},onError:A=>{A instanceof Q?A.errorCode==="command.noCommandBeingProcessed"?O.error("No command is being processed"):O.error(A.message):O.error(A.message)}})},onCancel:()=>{}})}return(A,m)=>(i(),f(e(Me),{open:o.value,"onUpdate:open":m[0]||(m[0]=$e=>o.value=$e)},{default:s(()=>[t(e(Le),{class:"max-h-screen overflow-y-auto sm:max-w-xl"},{default:s(()=>[t(e(De),null,{default:s(()=>[t(e(Ie),null,{default:s(()=>m[1]||(m[1]=[c(" Command detail ")])),_:1,__:[1]}),t(e(Ne),null,{default:s(()=>m[2]||(m[2]=[c(" Real-time information about the selected command ")])),_:1,__:[2]})]),_:1}),e(u)?(i(),g("div",Rt,[n("div",At,[t(e(X),{class:"w-8 h-8 animate-spin"})])])):e(R)?(i(),g("div",bt,m[3]||(m[3]=[n("div",{class:"flex items-center justify-center py-8"},[n("p",{class:"text-sm text-muted-foreground"}," Failed to load command details ")],-1)]))):e(a)?(i(),g("div",wt,[n("div",$t,[n("div",Mt,[(i(),f(h(e(Z)(e(a).type)))),n("span",Lt,x(e(ee)(e(a).type)),1)]),t(te,{status:e(a).status},null,8,["status"])]),n("div",Tt,[n("div",null,[m[4]||(m[4]=n("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),n("p",kt,x(e(a).id),1)]),n("div",Dt,[m[5]||(m[5]=n("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),t(se,{source:e(a).source},null,8,["source"])]),e(a).completedAt&&e(a).startedAt?(i(),g("div",It,[m[6]||(m[6]=n("p",{class:"text-sm text-muted-foreground"}," Duration ",-1)),n("p",Nt,x(e(Ye)((new Date(e(a).completedAt).getTime()-new Date(e(a).startedAt).getTime())/1e3)),1)])):k("",!0)]),n("div",Vt,[m[7]||(m[7]=n("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),n("div",Ft,[n("span",Pt,x(JSON.stringify(e(a).inputs,null,4)),1)])]),e(a).status!=="PROCESSING"&&e(a).status!=="QUEUED"?(i(),g("div",Bt,[m[8]||(m[8]=n("p",{class:"text-sm font-medium"}," Command Outputs ",-1)),n("div",Gt,[n("span",Qt,x(JSON.stringify(e(a).outputs,null,4)),1)])])):k("",!0),e(a).error?(i(),g("div",Wt,[m[9]||(m[9]=n("p",{class:"text-sm font-medium text-red-500"}," Error ",-1)),n("div",ht,x(e(a).error),1)])):k("",!0),n("div",Kt,[m[14]||(m[14]=n("p",{class:"text-sm font-medium"}," Timeline ",-1)),n("div",Ut,[n("div",qt,[m[10]||(m[10]=n("span",{class:"text-muted-foreground"},"Created",-1)),n("span",null,x(e(G)(e(a).createdAt)),1)]),e(a).startedAt?(i(),g("div",jt,[m[11]||(m[11]=n("span",{class:"text-muted-foreground"},"Started",-1)),n("span",null,x(e(G)(e(a).startedAt)),1)])):k("",!0),e(a).completedAt?(i(),g("div",Ht,[m[12]||(m[12]=n("span",{class:"text-muted-foreground"},"Completed",-1)),n("span",null,x(e(G)(e(a).completedAt)),1)])):k("",!0),n("div",zt,[m[13]||(m[13]=n("span",{class:"text-muted-foreground"},"Last Updated",-1)),n("span",null,x(e(G)(e(a).updatedAt)),1)])])]),n("div",Yt,[e(a).status==="QUEUED"?(i(),f(e(P),{key:0,variant:"destructive",class:"flex-1",onClick:E},{default:s(()=>m[15]||(m[15]=[c(" Remove from queue ")])),_:1,__:[15]})):e(a).status==="PROCESSING"?(i(),f(e(P),{key:1,variant:"destructive",class:"flex-1",onClick:F},{default:s(()=>m[16]||(m[16]=[c(" Stop execution ")])),_:1,__:[16]})):(i(),f(e(P),{key:2,variant:"outline",class:"flex-1",disabled:""},{default:s(()=>m[17]||(m[17]=[c(" Re-run ")])),_:1,__:[17]}))])])):k("",!0)]),_:1})]),_:1},8,["open"]))}}),Zt="command-config",es={moveTo:{direction:"FORWARD",motorSpeed:80},moveForward:{motorSpeed:80},moveBackward:{motorSpeed:80},cargoOpen:{motorSpeed:80},cargoClose:{motorSpeed:80},cargoLift:{motorSpeed:80,position:20},cargoLower:{motorSpeed:80,position:100}};function ts(){const r=nt(Zt,es),d=Y(()=>r.value),o={STOP_MOVEMENT:()=>{},MOVE_BACKWARD:a=>{r.value={...r.value,moveBackward:{motorSpeed:a.motorSpeed}}},MOVE_FORWARD:a=>{r.value={...r.value,moveForward:{motorSpeed:a.motorSpeed}}},MOVE_TO:a=>{r.value={...r.value,moveTo:{direction:a.direction,motorSpeed:a.motorSpeed}}},CARGO_OPEN:a=>{r.value={...r.value,cargoOpen:{motorSpeed:a.motorSpeed}}},CARGO_CLOSE:a=>{r.value={...r.value,cargoClose:{motorSpeed:a.motorSpeed}}},CARGO_LIFT:a=>{r.value={...r.value,cargoLift:{motorSpeed:a.motorSpeed,position:a.position}}},CARGO_LOWER:a=>{r.value={...r.value,cargoLower:{motorSpeed:a.motorSpeed,position:a.position}}},CARGO_CHECK_QR:()=>{},SCAN_LOCATION:()=>{},WAIT:()=>{}};function l(a,u){const R=o[a];R&&R(u)}return{commandConfig:d,updateCommandConfigFromInputs:l}}const ss={class:"flex items-center gap-2"},os=v({__name:"CommandTypeSelect",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},by:{type:[String,Function]},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(r,{emit:d}){const a=_t(r,d),u={STOP_MOVEMENT:{icon:Pe,label:"Stop Movement"},MOVE_FORWARD:{icon:Te,label:"Move Forward"},MOVE_BACKWARD:{icon:Xe,label:"Move Backward"},MOVE_TO:{icon:Je,label:"Move To"},CARGO_OPEN:{icon:U,label:"Cargo Open"},CARGO_CLOSE:{icon:U,label:"Cargo Close"},CARGO_LIFT:{icon:U,label:"Cargo Lift"},CARGO_LOWER:{icon:U,label:"Cargo Lower"},CARGO_CHECK_QR:{icon:Fe,label:"Cargo Check QR"},SCAN_LOCATION:{icon:Ve,label:"Scan Location"},WAIT:{icon:oe,label:"Wait"}};return(R,S)=>(i(),f(e(de),H(z(e(a))),{default:s(()=>[t(e(Ae),null,{default:s(()=>[t(e(ue),null,{default:s(()=>[t(e(me),{placeholder:"Select command type"})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[(i(),g(K,null,Se(u,(p,L)=>t(e(B),{key:L,value:L},{default:s(()=>[n("div",ss,[(i(),f(h(p.icon),{class:"w-4 h-4"})),n("span",null,x(p.label),1)])]),_:2},1032,["value"])),64))]),_:1})]),_:1},16))}}),ns=v({__name:"CargoCheckQRInputs",setup(r){return(d,o)=>(i(),f(e(b),{name:"inputs.qrCode"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("QR Code")])),_:1,__:[0]}),t(e(N),M(l,{type:"text",placeholder:"Enter QR code"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),as=v({__name:"CargoCloseInputs",setup(r){return(d,o)=>(i(),f(e(b),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ls=v({__name:"CargoLiftInputs",setup(r){return(d,o)=>(i(),g(K,null,[t(e(b),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Lift position (cm)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter lift position"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(b),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),is=v({__name:"CargoLowerInputs",setup(r){return(d,o)=>(i(),g(K,null,[t(e(b),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Lower position (cm)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter lower position"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(b),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),rs=v({__name:"CargoOpenInputs",setup(r){return(d,o)=>(i(),f(e(b),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ds=v({__name:"MoveBackwardInputs",setup(r){return(d,o)=>(i(),f(e(b),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),us=v({__name:"MoveForwardInputs",setup(r){return(d,o)=>(i(),f(e(b),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ms={class:"flex items-center gap-2"},ps={class:"flex items-center gap-2"},cs=v({__name:"MoveToInputs",setup(r){return(d,o)=>(i(),g(K,null,[t(e(b),{name:"inputs.location"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Location")])),_:1,__:[0]}),t(e(N),M(l,{type:"text",placeholder:"Enter location"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(b),{name:"inputs.direction"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Move direction")])),_:1,__:[1]}),t(e(de),H(z(l)),{default:s(()=>[t(e(Ae),null,{default:s(()=>[t(e(ue),null,{default:s(()=>[t(e(me),{placeholder:"Select direction"})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[t(e(B),{value:"FORWARD"},{default:s(()=>[n("div",ms,[t(e(mt),{class:"w-4 h-4"}),o[2]||(o[2]=n("span",null,"Forward",-1))])]),_:1}),t(e(B),{value:"BACKWARD"},{default:s(()=>[n("div",ps,[t(e(pt),{class:"w-4 h-4"}),o[3]||(o[3]=n("span",null,"Backward",-1))])]),_:1})]),_:1})]),_:2},1040)]),_:2},1024)]),_:1}),t(e(b),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[4]||(o[4]=[c("Motor Speed (0-100%)")])),_:1,__:[4]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),_s=v({__name:"WaitInputs",setup(r){return(d,o)=>(i(),f(e(b),{name:"inputs.durationMs"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Duration (ms)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter duration"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),fs=v({__name:"DynamicInputs",props:{commandType:{}},setup(r){const d=r,o={MOVE_TO:cs,MOVE_FORWARD:us,MOVE_BACKWARD:ds,CARGO_OPEN:rs,CARGO_CLOSE:as,CARGO_LIFT:ls,CARGO_LOWER:is,CARGO_CHECK_QR:ns,WAIT:_s,STOP_MOVEMENT:null,SCAN_LOCATION:null},l=Y(()=>o[d.commandType]);return(a,u)=>e(l)?(i(),f(h(e(l)),{key:a.commandType})):k("",!0)}}),Cs=it("type",[y({type:T("STOP_MOVEMENT"),inputs:y({}).default({})}),y({type:T("MOVE_TO"),inputs:y({location:_e(),direction:rt([T("FORWARD"),T("BACKWARD")]),motorSpeed:V().min(0).max(100)})}),y({type:T("MOVE_FORWARD"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:T("MOVE_BACKWARD"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:T("CARGO_OPEN"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:T("CARGO_CLOSE"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:T("CARGO_LIFT"),inputs:y({motorSpeed:V().min(0).max(100),position:V().min(0)})}),y({type:T("CARGO_LOWER"),inputs:y({motorSpeed:V().min(0).max(100),position:V().min(0)})}),y({type:T("CARGO_CHECK_QR"),inputs:y({qrCode:_e()})}),y({type:T("SCAN_LOCATION"),inputs:y({}).default({})}),y({type:T("WAIT"),inputs:y({durationMs:V()})})]),ys={class:"space-y-4"},gs=v({__name:"CreateCommandForm",setup(r){const d=Re(),{values:o,handleSubmit:l,setFieldValue:a}=dt({validationSchema:ut(Cs),initialValues:{type:"STOP_MOVEMENT",inputs:{}}}),u=Y(()=>o.type),{mutate:R,isPending:S}=Be(),{commandConfig:p,updateCommandConfigFromInputs:L}=ts(),C=l(I=>{R(I,{onSuccess:()=>{O.success("Command created successfully"),d.invalidateQueries({queryKey:[Ge]}),d.invalidateQueries({queryKey:[ye]})},onError:E=>{E instanceof Q?O.error({title:E.errorCode,message:E.message}):O.error("Failed to create command")}}),L(u.value,I.inputs)});function _(I){a("type",I);const F={MOVE_TO:p.value.moveTo,MOVE_FORWARD:p.value.moveForward,MOVE_BACKWARD:p.value.moveBackward,CARGO_OPEN:p.value.cargoOpen,CARGO_CLOSE:p.value.cargoClose,CARGO_LIFT:p.value.cargoLift,CARGO_LOWER:p.value.cargoLower}[I]??{};a("inputs",{...F})}return(I,E)=>(i(),f(e(ae),{class:"sticky top-6"},{default:s(()=>[t(e(ie),null,{default:s(()=>[t(e(re),null,{default:s(()=>E[2]||(E[2]=[c("Create command")])),_:1,__:[2]})]),_:1}),n("form",{onSubmit:E[1]||(E[1]=W((...F)=>e(C)&&e(C)(...F),["prevent"]))},[t(e(le),null,{default:s(()=>[n("div",ys,[t(e(b),{name:"type"},{default:s(()=>[t(e(w),null,{default:s(()=>[t(e($),null,{default:s(()=>E[3]||(E[3]=[c("Command type")])),_:1,__:[3]}),t(os,{disabled:e(S),"model-value":e(u),"onUpdate:modelValue":E[0]||(E[0]=F=>_(F))},null,8,["disabled","model-value"]),t(e(D))]),_:1})]),_:1}),t(fs,{"command-type":e(u)},null,8,["command-type"])])]),_:1}),t(e(be),{class:"flex flex-col gap-2"},{default:s(()=>[t(e(P),{type:"submit",class:"w-full",disabled:e(S)},{default:s(()=>[e(S)?(i(),f(e(X),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):k("",!0),E[4]||(E[4]=c(" Create "))]),_:1,__:[4]},8,["disabled"])]),_:1})],32)]),_:1}))}}),we=v({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(r){const d=r,o=Y(()=>{const{class:l,...a}=d;return a});return(l,a)=>(i(),f(e(St),M(o.value,{class:e(lt)("-mx-1 my-1 h-px bg-muted",d.class)}),null,16,["class"]))}}),vs={key:0},xs={class:"flex items-center justify-center gap-2 p-9"},Os={class:"flex items-center justify-between"},Ss={class:"flex items-center gap-2 font-medium"},Es={class:"flex items-center gap-2 text-sm text-muted-foreground"},Rs={key:0,class:"text-sm"},As={key:1,class:"text-sm"},bs=1e3,ws=v({__name:"CurrentProcessingCommandCard",emits:["viewDetails"],setup(r,{emit:d}){const o=d,l=Re(),{openConfirmation:a}=J(),{data:u,isError:R}=Qe({axiosOpts:{doNotShowLoading:!0},refetchInterval:bs}),{mutate:S,isPending:p}=Ce();function L(){a({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{S(void 0,{onSuccess:()=>{O.success("Command cancelled successfully"),l.setQueryData([ye],C=>({...C,status:"CANCELING"}))},onError:C=>{C instanceof Q?C.errorCode==="command.noCommandBeingProcessed"?O.error("No command is being processed"):O.error(C.message):O.error(C.message)}})},onCancel:()=>{}})}return(C,_)=>e(u)&&!e(R)?(i(),f(e(ae),{key:0},{default:s(()=>[t(e(ie),{class:"pb-3"},{default:s(()=>[t(e(re),{class:"flex items-center justify-between"},{default:s(()=>[_[3]||(_[3]=n("span",null,"Current Command",-1)),t(te,{status:e(u).status},null,8,["status"])]),_:1,__:[3]})]),_:1}),t(e(le),null,{default:s(()=>[e(p)?(i(),g("div",vs,[n("div",xs,[t(e(ft),{class:"w-4 h-4 animate-spin"}),_[4]||(_[4]=n("span",null,"Cancelling command...",-1))])])):(i(),g("div",{key:1,class:"p-4 space-y-3 border rounded-lg cursor-pointer bg-muted/50",onClick:_[2]||(_[2]=I=>o("viewDetails",e(u).id))},[n("div",Os,[n("div",Ss,[(i(),f(h(e(Z)(e(u).type)),{class:"w-5 h-5"})),n("span",null,x(e(ee)(e(u).type)),1)]),n("div",{class:"flex items-center gap-2",onClick:_[1]||(_[1]=W(()=>{},["stop"]))},[t(se,{source:e(u).source},null,8,["source"]),t(e(ge),null,{default:s(()=>[t(e(ve),{"as-child":""},{default:s(()=>[t(e(P),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(xe),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(Oe),{align:"end"},{default:s(()=>[t(e(q),{class:"cursor-pointer",onClick:_[0]||(_[0]=W(I=>o("viewDetails",e(u).id),["stop"]))},{default:s(()=>_[5]||(_[5]=[c(" View details ")])),_:1,__:[5]}),t(e(we)),t(e(q),{class:"text-red-500 cursor-pointer",onClick:L},{default:s(()=>_[6]||(_[6]=[c(" Cancel command ")])),_:1,__:[6]})]),_:1})]),_:1})])]),n("div",Es,[t(e(oe),{class:"w-4 h-4"}),n("span",null,"Started at: "+x(e(u).startedAt?e(G)(e(u).startedAt):"N/A"),1)]),e(u).type==="MOVE_TO"?(i(),g("div",Rs,[_[7]||(_[7]=n("span",{class:"font-medium"},"Location: ",-1)),c(" "+x(e(u).inputs.location),1)])):e(u).type==="CARGO_CHECK_QR"?(i(),g("div",As,[_[8]||(_[8]=n("span",{class:"font-medium"},"QR Code: ",-1)),c(" "+x(e(u).inputs.qrCode),1)])):k("",!0)]))]),_:1})]),_:1})):k("",!0)}}),$s={class:"flex items-center justify-between"},Ms={class:"flex items-center gap-2 font-medium"},Ls={class:"flex items-center gap-2 text-sm text-muted-foreground"},Ts={key:0,class:"text-sm"},ks={key:1,class:"text-sm"},Ds=v({__name:"QueuedCommandItem",props:{command:{}},emits:["viewDetails","onRemove"],setup(r,{emit:d}){const o=r,l=d,{openConfirmation:a}=J(),{mutate:u}=fe();function R(){a({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{u(o.command.id,{onSuccess:()=>{O.success("Command removed from queue"),l("onRemove")},onError:S=>{S instanceof Q?S.errorCode==="command.inProcessingCanNotBeDeleted"?O.error("Command is being processed and cannot be deleted"):O.error(S.message):O.error(S.message)}})},onCancel:()=>{}})}return(S,p)=>(i(),g("div",{class:"p-4 space-y-3 transition-colors border rounded-lg cursor-pointer bg-muted/30 border-border/50 hover:border-border",onClick:p[3]||(p[3]=L=>l("viewDetails",o.command.id))},[n("div",$s,[n("div",Ms,[(i(),f(h(e(Z)(o.command.type)),{class:"w-5 h-5"})),n("span",null,x(e(ee)(o.command.type)),1)]),n("div",{class:"flex items-center gap-2",onClick:p[2]||(p[2]=W(()=>{},["stop"]))},[t(te,{status:o.command.status},null,8,["status"]),t(se,{source:o.command.source},null,8,["source"]),t(e(ge),null,{default:s(()=>[t(e(ve),{"as-child":""},{default:s(()=>[t(e(P),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(xe),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),t(e(Oe),{align:"end",onClick:p[1]||(p[1]=W(()=>{},["stop"]))},{default:s(()=>[t(e(q),{onClick:p[0]||(p[0]=L=>l("viewDetails",o.command.id))},{default:s(()=>p[4]||(p[4]=[c(" View details ")])),_:1,__:[4]}),t(e(we)),t(e(q),{class:"text-red-500",onClick:R},{default:s(()=>p[5]||(p[5]=[c(" Remove from queue ")])),_:1,__:[5]})]),_:1})]),_:1})])]),n("div",Ls,[t(e(oe),{class:"w-4 h-4"}),n("span",null,"Created "+x(e(We)(o.command.createdAt)),1)]),o.command.type==="MOVE_TO"?(i(),g("div",Ts,[p[6]||(p[6]=n("span",{class:"font-medium"},"Location: ",-1)),c(" "+x(S.command.inputs.location),1)])):o.command.type==="CARGO_CHECK_QR"?(i(),g("div",ks,[p[7]||(p[7]=n("span",{class:"font-medium"},"QR Code: ",-1)),c(" "+x(S.command.inputs.qrCode),1)])):k("",!0)]))}}),Is={key:1,class:"py-6 text-center text-muted-foreground"},Ns={class:"flex items-center gap-1 text-sm text-muted-foreground"},Vs=1e3,Fs=v({__name:"WaitingCommandList",emits:["viewDetails"],setup(r,{emit:d}){const o=d,l=j(1),a=j(5),{data:u,refetch:R}=he(l,a,{axiosOpts:{doNotShowLoading:!0},refetchInterval:Vs});function S(){l.value=1}function p(L){l.value=L}return(L,C)=>e(u)?(i(),f(e(ae),{key:0},{default:s(()=>[t(e(ie),{class:"pb-3"},{default:s(()=>[t(e(re),{class:"flex items-center justify-between"},{default:s(()=>[C[1]||(C[1]=n("span",null,"Waiting Commands",-1)),t(e(Ze),{variant:"outline"},{default:s(()=>[c(x(e(u).totalItems)+" commands ",1)]),_:1})]),_:1,__:[1]})]),_:1}),t(e(le),{class:"space-y-3"},{default:s(()=>[e(u).totalItems>0?(i(!0),g(K,{key:0},Se(e(u).items,_=>(i(),f(Ds,{key:_.id,command:_,onOnRemove:e(R),onViewDetails:I=>o("viewDetails",_.id)},null,8,["command","onOnRemove","onViewDetails"]))),128)):(i(),g("div",Is," No commands in queue "))]),_:1}),t(e(be),{class:"flex items-center justify-between pt-4 border-t"},{default:s(()=>[n("div",Ns,[C[5]||(C[5]=n("span",{class:"text-sm sr-only sm:not-sr-only"}," Items per page: ",-1)),t(e(de),{modelValue:e(a),"onUpdate:modelValue":[C[0]||(C[0]=_=>Ee(a)?a.value=_:null),S]},{default:s(()=>[t(e(ue),{class:"w-16 h-8 ml-2"},{default:s(()=>[t(e(me),{placeholder:"5"})]),_:1}),t(e(pe),null,{default:s(()=>[t(e(B),{value:"5"},{default:s(()=>C[2]||(C[2]=[c(" 5 ")])),_:1,__:[2]}),t(e(B),{value:"10"},{default:s(()=>C[3]||(C[3]=[c(" 10 ")])),_:1,__:[3]}),t(e(B),{value:"20"},{default:s(()=>C[4]||(C[4]=[c(" 20 ")])),_:1,__:[4]})]),_:1})]),_:1},8,["modelValue"])]),t(e(Ke),{"sibling-count":1,"items-per-page":e(a),total:e(u).totalItems,"default-page":e(l),"onUpdate:page":p},{default:s(()=>[t(e(Ue),{class:"flex items-center gap-1"},{default:s(()=>[t(e(qe)),t(e(je)),t(e(He)),t(e(ze))]),_:1})]),_:1},8,["items-per-page","total","default-page"])]),_:1})]),_:1})):k("",!0)}}),Ps={class:"flex items-center justify-between"},Bs={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},Gs={class:"space-y-6 md:col-span-2"},so=v({__name:"CommandQueueView",setup(r){const d=j(!1),o=j(null);function l(a){o.value=a,d.value=!0}return(a,u)=>(i(),f(Ct,null,{default:s(()=>[n("div",Ps,[u[2]||(u[2]=n("div",null,[n("h1",{class:"text-xl font-semibold tracking-tight"}," Robot command queue "),n("p",{class:"text-sm text-muted-foreground"}," Manage and monitor robot commands in real-time ")],-1)),t(e(Et),null,{default:s(()=>[t(e(gt),null,{default:s(()=>[t(e(vt),{"as-child":""},{default:s(()=>[t(e(P),{variant:"outline",size:"icon"},{default:s(()=>[t(e(X),{class:"w-4 h-4 animate-spin"})]),_:1})]),_:1}),t(e(xt),null,{default:s(()=>u[1]||(u[1]=[n("p",null,"Refreshing in real-time",-1)])),_:1,__:[1]})]),_:1})]),_:1})]),n("div",Bs,[n("div",Gs,[t(ws,{onViewDetails:l}),t(Fs,{onViewDetails:l})]),n("div",null,[t(gs)])]),e(o)?(i(),f(Xt,{key:0,"is-open":e(d),"onUpdate:isOpen":u[0]||(u[0]=R=>Ee(d)?d.value=R:null),"command-id":e(o)},null,8,["is-open","command-id"])):k("",!0)]),_:1}))}});export{so as default};
