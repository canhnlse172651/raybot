import{_ as P}from"./index-CvEIS6KB.js";import{g as Le,h as ke,A as Te}from"./index-CcgEifhO.js";import{u as De,a as _e,b as fe,_ as Ie,c as Ne,d as Ve,g as z,e as Y,f as J,h as X,C as Z,S as Fe,Q as Pe,P as U,M as Ge,A as he,i as Qe,j as Be,k as We,l as Ce,m as qe,n as ye,o as ge,E as ve,p as xe,q as K,t as Ue,r as Ke}from"./DropdownMenuTrigger.vuevuetypescriptsetuptruelang-BKv9Wvsd.js";import{b as je,a as h}from"./date-W8Ww_3Ys.js";import{u as ee,L as te}from"./confirmation-store-PDxi_0BG.js";import{d as x,c as C,o as r,w as s,a as Oe,m as M,u as e,i as se,j as oe,Q as He,P as ze,R as Ye,S as Je,O as pe,g as t,p as g,D as T,s as c,l as n,y as W,v,T as Q,J as O,K as Xe,k as H,E as Se,F as q,h as B,r as j,L as Ee}from"./index-BWQiikOf.js";import{P as Ze,c as Re,e as Ae,a as et}from"./http-Z9rgl52c.js";import{_ as we,F as w,a as b,b as $,c as N,d as D,e as tt,o as y,l as k,n as V,u as st,s as ce,f as ot,t as nt}from"./FormMessage.vuevuetypescriptsetuptruelang-WYaIZJOd.js";import{_ as ne,a as ae}from"./CardContent.vuevuetypescriptsetuptruelang-DX8ITtLu.js";import{_ as be}from"./CardFooter.vuevuetypescriptsetuptruelang-Bwcd50dB.js";import{a as le,_ as re}from"./CardTitle.vuevuetypescriptsetuptruelang-BXgDO8nm.js";import{_ as ie,a as de,b as me,c as ue,d as G}from"./SelectValue.vuevuetypescriptsetuptruelang-DIL7_Wf9.js";import{u as at,d as lt}from"./useForwardPropsEmits-BdCRpJMf.js";/* empty css                                                              */import{L as rt,_ as it}from"./PageContainer.vuevuetypescriptsetuptruelang-BMnOwmiV.js";import{_ as dt}from"./index-D0u9ezh_.js";import{_ as mt,a as ut,b as pt,c as ct,d as _t,e as ft}from"./PaginationPrev.vuevuetypescriptsetuptruelang-DSVlvR2e.js";import{b as Ct,_ as yt,a as gt,d as vt}from"./TooltipTrigger.vuevuetypescriptsetuptruelang-DvrwxrlI.js";import"./check-CQqiH5K1.js";import"./RovingFocusGroup-BbHuxOEQ.js";import"./useFormControl-lm5GEZvp.js";const xt=x({__name:"MenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(i){const m=i;return(o,l)=>(r(),C(e(Ze),M(m,{role:"separator","aria-orientation":"horizontal"}),{default:s(()=>[Oe(o.$slots,"default")]),_:3},16))}}),Ot=x({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(i){const m=i;return at(),(o,l)=>(r(),C(e(xt),se(oe(m)),{default:s(()=>[Oe(o.$slots,"default")]),_:3},16))}});/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Re("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Re("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Rt={key:0},At={class:"flex items-center justify-center py-8"},wt={key:1},bt={key:2,class:"mt-6 space-y-6"},$t={class:"flex items-center justify-between"},Mt={class:"flex items-center gap-2"},Lt={class:"text-sm font-medium"},kt={class:"grid grid-cols-2 gap-4"},Tt={class:"font-medium"},Dt={class:"flex flex-col items-start gap-2"},It={key:0},Nt={class:"font-medium"},Vt={class:"space-y-2"},Ft={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Pt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Gt={key:0,class:"space-y-2"},ht={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Qt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Bt={key:1,class:"space-y-2"},Wt={class:"p-3 text-red-500 rounded-md bg-red-500/10"},qt={class:"space-y-2"},Ut={class:"space-y-3"},Kt={class:"flex justify-between text-sm"},jt={key:0,class:"flex justify-between text-sm"},Ht={key:1,class:"flex justify-between text-sm"},zt={class:"flex justify-between text-sm"},Yt={class:"flex gap-2 pt-4"},Jt=1e3,Xt=x({__name:"CommandDetailSheet",props:He({commandId:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(i){const m=i,o=ze(i,"isOpen"),l=Ye(m,"commandId"),{data:a,isPending:d,isError:R,refetch:S}=De(l,{axiosOpts:{doNotShowLoading:!0}}),{mutate:p}=_e(),{mutate:L}=fe(),{openConfirmation:f}=ee(),{pause:_,resume:I}=Je(()=>{S()},Jt,{immediate:!1});pe(a,A=>{A&&["SUCCEEDED","FAILED","CANCELED"].includes(A.status)?_():I()},{immediate:!0}),pe(o,A=>{A?I():_()},{immediate:!0});function E(){f({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{p(m.commandId,{onSuccess:()=>{O.success("Command removed from queue")},onError:A=>{A instanceof Q?A.errorCode==="command.inProcessingCanNotBeDeleted"?O.error("Command is being processed and cannot be deleted"):O.error(A.message):O.error(A.message)}})},onCancel:()=>{}})}function F(){f({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{L(void 0,{onSuccess:()=>{O.success("Command cancelled successfully")},onError:A=>{A instanceof Q?A.errorCode==="command.noCommandBeingProcessed"?O.error("No command is being processed"):O.error(A.message):O.error(A.message)}})},onCancel:()=>{}})}return(A,u)=>(r(),C(e(Le),{open:o.value,"onUpdate:open":u[0]||(u[0]=Me=>o.value=Me)},{default:s(()=>[t(e(ke),{class:"max-h-screen overflow-y-auto sm:max-w-xl"},{default:s(()=>[t(e(Ie),null,{default:s(()=>[t(e(Ne),null,{default:s(()=>u[1]||(u[1]=[c(" Command detail ")])),_:1,__:[1]}),t(e(Ve),null,{default:s(()=>u[2]||(u[2]=[c(" Real-time information about the selected command ")])),_:1,__:[2]})]),_:1}),e(d)?(r(),g("div",Rt,[n("div",At,[t(e(te),{class:"w-8 h-8 animate-spin"})])])):e(R)?(r(),g("div",wt,u[3]||(u[3]=[n("div",{class:"flex items-center justify-center py-8"},[n("p",{class:"text-sm text-muted-foreground"}," Failed to load command details ")],-1)]))):e(a)?(r(),g("div",bt,[n("div",$t,[n("div",Mt,[(r(),C(W(e(z)(e(a).type)))),n("span",Lt,v(e(Y)(e(a).type)),1)]),t(J,{status:e(a).status},null,8,["status"])]),n("div",kt,[n("div",null,[u[4]||(u[4]=n("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),n("p",Tt,v(e(a).id),1)]),n("div",Dt,[u[5]||(u[5]=n("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),t(X,{source:e(a).source},null,8,["source"])]),e(a).completedAt&&e(a).startedAt?(r(),g("div",It,[u[6]||(u[6]=n("p",{class:"text-sm text-muted-foreground"}," Duration ",-1)),n("p",Nt,v(e(je)((new Date(e(a).completedAt).getTime()-new Date(e(a).startedAt).getTime())/1e3)),1)])):T("",!0)]),n("div",Vt,[u[7]||(u[7]=n("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),n("div",Ft,[n("span",Pt,v(JSON.stringify(e(a).inputs,null,4)),1)])]),e(a).status!=="PROCESSING"&&e(a).status!=="QUEUED"?(r(),g("div",Gt,[u[8]||(u[8]=n("p",{class:"text-sm font-medium"}," Command Outputs ",-1)),n("div",ht,[n("span",Qt,v(JSON.stringify(e(a).outputs,null,4)),1)])])):T("",!0),e(a).error?(r(),g("div",Bt,[u[9]||(u[9]=n("p",{class:"text-sm font-medium text-red-500"}," Error ",-1)),n("div",Wt,v(e(a).error),1)])):T("",!0),n("div",qt,[u[14]||(u[14]=n("p",{class:"text-sm font-medium"}," Timeline ",-1)),n("div",Ut,[n("div",Kt,[u[10]||(u[10]=n("span",{class:"text-muted-foreground"},"Created",-1)),n("span",null,v(e(h)(e(a).createdAt)),1)]),e(a).startedAt?(r(),g("div",jt,[u[11]||(u[11]=n("span",{class:"text-muted-foreground"},"Started",-1)),n("span",null,v(e(h)(e(a).startedAt)),1)])):T("",!0),e(a).completedAt?(r(),g("div",Ht,[u[12]||(u[12]=n("span",{class:"text-muted-foreground"},"Completed",-1)),n("span",null,v(e(h)(e(a).completedAt)),1)])):T("",!0),n("div",zt,[u[13]||(u[13]=n("span",{class:"text-muted-foreground"},"Last Updated",-1)),n("span",null,v(e(h)(e(a).updatedAt)),1)])])]),n("div",Yt,[e(a).status==="QUEUED"?(r(),C(e(P),{key:0,variant:"destructive",class:"flex-1",onClick:E},{default:s(()=>u[15]||(u[15]=[c(" Remove from queue ")])),_:1,__:[15]})):e(a).status==="PROCESSING"?(r(),C(e(P),{key:1,variant:"destructive",class:"flex-1",onClick:F},{default:s(()=>u[16]||(u[16]=[c(" Stop execution ")])),_:1,__:[16]})):(r(),C(e(P),{key:2,variant:"outline",class:"flex-1",disabled:""},{default:s(()=>u[17]||(u[17]=[c(" Re-run ")])),_:1,__:[17]}))])])):T("",!0)]),_:1})]),_:1},8,["open"]))}}),Zt="command-config",es={moveTo:{direction:"FORWARD",motorSpeed:80},moveForward:{motorSpeed:80},moveBackward:{motorSpeed:80},cargoOpen:{motorSpeed:80},cargoClose:{motorSpeed:80},cargoLift:{motorSpeed:80,position:20},cargoLower:{motorSpeed:80,position:100}};function ts(){const i=Xe(Zt,es),m=H(()=>i.value),o={STOP_MOVEMENT:()=>{},MOVE_BACKWARD:a=>{i.value={...i.value,moveBackward:{motorSpeed:a.motorSpeed}}},MOVE_FORWARD:a=>{i.value={...i.value,moveForward:{motorSpeed:a.motorSpeed}}},MOVE_TO:a=>{i.value={...i.value,moveTo:{direction:a.direction,motorSpeed:a.motorSpeed}}},CARGO_OPEN:a=>{i.value={...i.value,cargoOpen:{motorSpeed:a.motorSpeed}}},CARGO_CLOSE:a=>{i.value={...i.value,cargoClose:{motorSpeed:a.motorSpeed}}},CARGO_LIFT:a=>{i.value={...i.value,cargoLift:{motorSpeed:a.motorSpeed,position:a.position}}},CARGO_LOWER:a=>{i.value={...i.value,cargoLower:{motorSpeed:a.motorSpeed,position:a.position}}},CARGO_CHECK_QR:()=>{},SCAN_LOCATION:()=>{},WAIT:()=>{}};function l(a,d){const R=o[a];R&&R(d)}return{commandConfig:m,updateCommandConfigFromInputs:l}}const ss={class:"flex items-center gap-2"},os=x({__name:"CommandTypeSelect",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},by:{type:[String,Function]},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(i,{emit:m}){const a=lt(i,m),d={STOP_MOVEMENT:{icon:Qe,label:"Stop Movement"},MOVE_FORWARD:{icon:Te,label:"Move Forward"},MOVE_BACKWARD:{icon:he,label:"Move Backward"},MOVE_TO:{icon:Ge,label:"Move To"},CARGO_OPEN:{icon:U,label:"Cargo Open"},CARGO_CLOSE:{icon:U,label:"Cargo Close"},CARGO_LIFT:{icon:U,label:"Cargo Lift"},CARGO_LOWER:{icon:U,label:"Cargo Lower"},CARGO_CHECK_QR:{icon:Pe,label:"Cargo Check QR"},SCAN_LOCATION:{icon:Fe,label:"Scan Location"},WAIT:{icon:Z,label:"Wait"}};return(R,S)=>(r(),C(e(ie),se(oe(e(a))),{default:s(()=>[t(e(we),null,{default:s(()=>[t(e(de),null,{default:s(()=>[t(e(me),{placeholder:"Select command type"})]),_:1})]),_:1}),t(e(ue),null,{default:s(()=>[(r(),g(q,null,Se(d,(p,L)=>t(e(G),{key:L,value:L},{default:s(()=>[n("div",ss,[(r(),C(W(p.icon),{class:"w-4 h-4"})),n("span",null,v(p.label),1)])]),_:2},1032,["value"])),64))]),_:1})]),_:1},16))}}),ns=x({__name:"CargoCheckQRInputs",setup(i){return(m,o)=>(r(),C(e(w),{name:"inputs.qrCode"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("QR Code")])),_:1,__:[0]}),t(e(N),M(l,{type:"text",placeholder:"Enter QR code"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),as=x({__name:"CargoCloseInputs",setup(i){return(m,o)=>(r(),C(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ls=x({__name:"CargoLiftInputs",setup(i){return(m,o)=>(r(),g(q,null,[t(e(w),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Lift position (cm)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter lift position"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),rs=x({__name:"CargoLowerInputs",setup(i){return(m,o)=>(r(),g(q,null,[t(e(w),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Lower position (cm)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter lower position"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),is=x({__name:"CargoOpenInputs",setup(i){return(m,o)=>(r(),C(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ds=x({__name:"MoveBackwardInputs",setup(i){return(m,o)=>(r(),C(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),ms=x({__name:"MoveForwardInputs",setup(i){return(m,o)=>(r(),C(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),us={class:"flex items-center gap-2"},ps={class:"flex items-center gap-2"},cs=x({__name:"MoveToInputs",setup(i){return(m,o)=>(r(),g(q,null,[t(e(w),{name:"inputs.location"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Location")])),_:1,__:[0]}),t(e(N),M(l,{type:"text",placeholder:"Enter location"}),null,16),t(e(D))]),_:2},1024)]),_:1}),t(e(w),{name:"inputs.direction"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[1]||(o[1]=[c("Move direction")])),_:1,__:[1]}),t(e(ie),se(oe(l)),{default:s(()=>[t(e(we),null,{default:s(()=>[t(e(de),null,{default:s(()=>[t(e(me),{placeholder:"Select direction"})]),_:1})]),_:1}),t(e(ue),null,{default:s(()=>[t(e(G),{value:"FORWARD"},{default:s(()=>[n("div",us,[t(e(Et),{class:"w-4 h-4"}),o[2]||(o[2]=n("span",null,"Forward",-1))])]),_:1}),t(e(G),{value:"BACKWARD"},{default:s(()=>[n("div",ps,[t(e(St),{class:"w-4 h-4"}),o[3]||(o[3]=n("span",null,"Backward",-1))])]),_:1})]),_:1})]),_:2},1040)]),_:2},1024)]),_:1}),t(e(w),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[4]||(o[4]=[c("Motor Speed (0-100%)")])),_:1,__:[4]}),t(e(N),M(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(D))]),_:2},1024)]),_:1})],64))}}),_s=x({__name:"WaitInputs",setup(i){return(m,o)=>(r(),C(e(w),{name:"inputs.durationMs"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>o[0]||(o[0]=[c("Duration (ms)")])),_:1,__:[0]}),t(e(N),M(l,{type:"number",placeholder:"Enter duration"}),null,16),t(e(D))]),_:2},1024)]),_:1}))}}),fs=x({__name:"DynamicInputs",props:{commandType:{}},setup(i){const m=i,o={MOVE_TO:cs,MOVE_FORWARD:ms,MOVE_BACKWARD:ds,CARGO_OPEN:is,CARGO_CLOSE:as,CARGO_LIFT:ls,CARGO_LOWER:rs,CARGO_CHECK_QR:ns,WAIT:_s,STOP_MOVEMENT:null,SCAN_LOCATION:null},l=H(()=>o[m.commandType]);return(a,d)=>e(l)?(r(),C(W(e(l)),{key:a.commandType})):T("",!0)}}),Cs=tt("type",[y({type:k("STOP_MOVEMENT"),inputs:y({}).default({})}),y({type:k("MOVE_TO"),inputs:y({location:ce(),direction:st([k("FORWARD"),k("BACKWARD")]),motorSpeed:V().min(0).max(100)})}),y({type:k("MOVE_FORWARD"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:k("MOVE_BACKWARD"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:k("CARGO_OPEN"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:k("CARGO_CLOSE"),inputs:y({motorSpeed:V().min(0).max(100)})}),y({type:k("CARGO_LIFT"),inputs:y({motorSpeed:V().min(0).max(100),position:V().min(0)})}),y({type:k("CARGO_LOWER"),inputs:y({motorSpeed:V().min(0).max(100),position:V().min(0)})}),y({type:k("CARGO_CHECK_QR"),inputs:y({qrCode:ce()})}),y({type:k("SCAN_LOCATION"),inputs:y({}).default({})}),y({type:k("WAIT"),inputs:y({durationMs:V()})})]),ys={class:"space-y-4"},gs=x({__name:"CreateCommandForm",setup(i){const m=Ae(),{values:o,handleSubmit:l,setFieldValue:a}=ot({validationSchema:nt(Cs),initialValues:{type:"STOP_MOVEMENT",inputs:{}}}),d=H(()=>o.type),{mutate:R,isPending:S}=Be(),{commandConfig:p,updateCommandConfigFromInputs:L}=ts(),f=l(I=>{R(I,{onSuccess:()=>{O.success("Command created successfully"),m.invalidateQueries({queryKey:[We]}),m.invalidateQueries({queryKey:[Ce]})},onError:E=>{E instanceof Q?O.error({title:E.errorCode,message:E.message}):O.error("Failed to create command")}}),L(d.value,I.inputs)});function _(I){a("type",I);const F={MOVE_TO:p.value.moveTo,MOVE_FORWARD:p.value.moveForward,MOVE_BACKWARD:p.value.moveBackward,CARGO_OPEN:p.value.cargoOpen,CARGO_CLOSE:p.value.cargoClose,CARGO_LIFT:p.value.cargoLift,CARGO_LOWER:p.value.cargoLower}[I]??{};a("inputs",{...F})}return(I,E)=>(r(),C(e(ne),{class:"sticky top-6"},{default:s(()=>[t(e(le),null,{default:s(()=>[t(e(re),null,{default:s(()=>E[2]||(E[2]=[c("Create command")])),_:1,__:[2]})]),_:1}),n("form",{onSubmit:E[1]||(E[1]=B((...F)=>e(f)&&e(f)(...F),["prevent"]))},[t(e(ae),null,{default:s(()=>[n("div",ys,[t(e(w),{name:"type"},{default:s(()=>[t(e(b),null,{default:s(()=>[t(e($),null,{default:s(()=>E[3]||(E[3]=[c("Command type")])),_:1,__:[3]}),t(os,{disabled:e(S),"model-value":e(d),"onUpdate:modelValue":E[0]||(E[0]=F=>_(F))},null,8,["disabled","model-value"]),t(e(D))]),_:1})]),_:1}),t(fs,{"command-type":e(d)},null,8,["command-type"])])]),_:1}),t(e(be),{class:"flex flex-col gap-2"},{default:s(()=>[t(e(P),{type:"submit",class:"w-full",disabled:e(S)},{default:s(()=>[e(S)?(r(),C(e(te),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):T("",!0),E[4]||(E[4]=c(" Create "))]),_:1,__:[4]},8,["disabled"])]),_:1})],32)]),_:1}))}}),$e=x({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(i){const m=i,o=H(()=>{const{class:l,...a}=m;return a});return(l,a)=>(r(),C(e(Ot),M(o.value,{class:e(et)("-mx-1 my-1 h-px bg-muted",m.class)}),null,16,["class"]))}}),vs={key:0},xs={class:"flex items-center justify-center gap-2 p-9"},Os={class:"flex items-center justify-between"},Ss={class:"flex items-center gap-2 font-medium"},Es={class:"flex items-center gap-2 text-sm text-muted-foreground"},Rs={key:0,class:"text-sm"},As={key:1,class:"text-sm"},ws=1e3,bs=x({__name:"CurrentProcessingCommandCard",emits:["viewDetails"],setup(i,{emit:m}){const o=m,l=Ae(),{openConfirmation:a}=ee(),{data:d,isError:R}=qe({axiosOpts:{doNotShowLoading:!0},refetchInterval:ws}),{mutate:S,isPending:p}=fe();function L(){a({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{S(void 0,{onSuccess:()=>{O.success("Command cancelled successfully"),l.setQueryData([Ce],f=>({...f,status:"CANCELING"}))},onError:f=>{f instanceof Q?f.errorCode==="command.noCommandBeingProcessed"?O.error("No command is being processed"):O.error(f.message):O.error(f.message)}})},onCancel:()=>{}})}return(f,_)=>e(d)&&!e(R)?(r(),C(e(ne),{key:0},{default:s(()=>[t(e(le),{class:"pb-3"},{default:s(()=>[t(e(re),{class:"flex items-center justify-between"},{default:s(()=>[_[3]||(_[3]=n("span",null,"Current Command",-1)),t(J,{status:e(d).status},null,8,["status"])]),_:1,__:[3]})]),_:1}),t(e(ae),null,{default:s(()=>[e(p)?(r(),g("div",vs,[n("div",xs,[t(e(rt),{class:"w-4 h-4 animate-spin"}),_[4]||(_[4]=n("span",null,"Cancelling command...",-1))])])):(r(),g("div",{key:1,class:"p-4 space-y-3 border rounded-lg cursor-pointer bg-muted/50",onClick:_[2]||(_[2]=I=>o("viewDetails",e(d).id))},[n("div",Os,[n("div",Ss,[(r(),C(W(e(z)(e(d).type)),{class:"w-5 h-5"})),n("span",null,v(e(Y)(e(d).type)),1)]),n("div",{class:"flex items-center gap-2",onClick:_[1]||(_[1]=B(()=>{},["stop"]))},[t(X,{source:e(d).source},null,8,["source"]),t(e(ye),null,{default:s(()=>[t(e(ge),{"as-child":""},{default:s(()=>[t(e(P),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(ve),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(xe),{align:"end"},{default:s(()=>[t(e(K),{class:"cursor-pointer",onClick:_[0]||(_[0]=B(I=>o("viewDetails",e(d).id),["stop"]))},{default:s(()=>_[5]||(_[5]=[c(" View details ")])),_:1,__:[5]}),t(e($e)),t(e(K),{class:"text-red-500 cursor-pointer",onClick:L},{default:s(()=>_[6]||(_[6]=[c(" Cancel command ")])),_:1,__:[6]})]),_:1})]),_:1})])]),n("div",Es,[t(e(Z),{class:"w-4 h-4"}),n("span",null,"Started at: "+v(e(d).startedAt?e(h)(e(d).startedAt):"N/A"),1)]),e(d).type==="MOVE_TO"?(r(),g("div",Rs,[_[7]||(_[7]=n("span",{class:"font-medium"},"Location: ",-1)),c(" "+v(e(d).inputs.location),1)])):e(d).type==="CARGO_CHECK_QR"?(r(),g("div",As,[_[8]||(_[8]=n("span",{class:"font-medium"},"QR Code: ",-1)),c(" "+v(e(d).inputs.qrCode),1)])):T("",!0)]))]),_:1})]),_:1})):T("",!0)}}),$s={class:"flex items-center justify-between"},Ms={class:"flex items-center gap-2 font-medium"},Ls={class:"flex items-center gap-2 text-sm text-muted-foreground"},ks={key:0,class:"text-sm"},Ts={key:1,class:"text-sm"},Ds=x({__name:"QueuedCommandItem",props:{command:{}},emits:["viewDetails","onRemove"],setup(i,{emit:m}){const o=i,l=m,{openConfirmation:a}=ee(),{mutate:d}=_e();function R(){a({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{d(o.command.id,{onSuccess:()=>{O.success("Command removed from queue"),l("onRemove")},onError:S=>{S instanceof Q?S.errorCode==="command.inProcessingCanNotBeDeleted"?O.error("Command is being processed and cannot be deleted"):O.error(S.message):O.error(S.message)}})},onCancel:()=>{}})}return(S,p)=>(r(),g("div",{class:"p-4 space-y-3 transition-colors border rounded-lg cursor-pointer bg-muted/30 border-border/50 hover:border-border",onClick:p[3]||(p[3]=L=>l("viewDetails",o.command.id))},[n("div",$s,[n("div",Ms,[(r(),C(W(e(z)(o.command.type)),{class:"w-5 h-5"})),n("span",null,v(e(Y)(o.command.type)),1)]),n("div",{class:"flex items-center gap-2",onClick:p[2]||(p[2]=B(()=>{},["stop"]))},[t(J,{status:o.command.status},null,8,["status"]),t(X,{source:o.command.source},null,8,["source"]),t(e(ye),null,{default:s(()=>[t(e(ge),{"as-child":""},{default:s(()=>[t(e(P),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(ve),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),t(e(xe),{align:"end",onClick:p[1]||(p[1]=B(()=>{},["stop"]))},{default:s(()=>[t(e(K),{onClick:p[0]||(p[0]=L=>l("viewDetails",o.command.id))},{default:s(()=>p[4]||(p[4]=[c(" View details ")])),_:1,__:[4]}),t(e($e)),t(e(K),{class:"text-red-500",onClick:R},{default:s(()=>p[5]||(p[5]=[c(" Remove from queue ")])),_:1,__:[5]})]),_:1})]),_:1})])]),n("div",Ls,[t(e(Z),{class:"w-4 h-4"}),n("span",null,"Created "+v(e(Ue)(o.command.createdAt)),1)]),o.command.type==="MOVE_TO"?(r(),g("div",ks,[p[6]||(p[6]=n("span",{class:"font-medium"},"Location: ",-1)),c(" "+v(S.command.inputs.location),1)])):o.command.type==="CARGO_CHECK_QR"?(r(),g("div",Ts,[p[7]||(p[7]=n("span",{class:"font-medium"},"QR Code: ",-1)),c(" "+v(S.command.inputs.qrCode),1)])):T("",!0)]))}}),Is={key:1,class:"py-6 text-center text-muted-foreground"},Ns={class:"flex items-center gap-1 text-sm text-muted-foreground"},Vs=1e3,Fs=x({__name:"WaitingCommandList",emits:["viewDetails"],setup(i,{emit:m}){const o=m,l=j(1),a=j(5),{data:d,refetch:R}=Ke(l,a,{axiosOpts:{doNotShowLoading:!0},refetchInterval:Vs});function S(){l.value=1}function p(L){l.value=L}return(L,f)=>e(d)?(r(),C(e(ne),{key:0},{default:s(()=>[t(e(le),{class:"pb-3"},{default:s(()=>[t(e(re),{class:"flex items-center justify-between"},{default:s(()=>[f[1]||(f[1]=n("span",null,"Waiting Commands",-1)),t(e(dt),{variant:"outline"},{default:s(()=>[c(v(e(d).totalItems)+" commands ",1)]),_:1})]),_:1,__:[1]})]),_:1}),t(e(ae),{class:"space-y-3"},{default:s(()=>[e(d).totalItems>0?(r(!0),g(q,{key:0},Se(e(d).items,_=>(r(),C(Ds,{key:_.id,command:_,onOnRemove:e(R),onViewDetails:I=>o("viewDetails",_.id)},null,8,["command","onOnRemove","onViewDetails"]))),128)):(r(),g("div",Is," No commands in queue "))]),_:1}),t(e(be),{class:"flex items-center justify-between pt-4 border-t"},{default:s(()=>[n("div",Ns,[f[5]||(f[5]=n("span",{class:"text-sm sr-only sm:not-sr-only"}," Items per page: ",-1)),t(e(ie),{modelValue:e(a),"onUpdate:modelValue":[f[0]||(f[0]=_=>Ee(a)?a.value=_:null),S]},{default:s(()=>[t(e(de),{class:"w-16 h-8 ml-2"},{default:s(()=>[t(e(me),{placeholder:"5"})]),_:1}),t(e(ue),null,{default:s(()=>[t(e(G),{value:"5"},{default:s(()=>f[2]||(f[2]=[c(" 5 ")])),_:1,__:[2]}),t(e(G),{value:"10"},{default:s(()=>f[3]||(f[3]=[c(" 10 ")])),_:1,__:[3]}),t(e(G),{value:"20"},{default:s(()=>f[4]||(f[4]=[c(" 20 ")])),_:1,__:[4]})]),_:1})]),_:1},8,["modelValue"])]),t(e(mt),{"sibling-count":1,"items-per-page":e(a),total:e(d).totalItems,"default-page":e(l),"onUpdate:page":p},{default:s(()=>[t(e(ut),{class:"flex items-center gap-1"},{default:s(()=>[t(e(pt)),t(e(ct)),t(e(_t)),t(e(ft))]),_:1})]),_:1},8,["items-per-page","total","default-page"])]),_:1})]),_:1})):T("",!0)}}),Ps={class:"flex items-center justify-between"},Gs={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},hs={class:"space-y-6 md:col-span-2"},io=x({__name:"CommandQueueView",setup(i){const m=j(!1),o=j(null);function l(a){o.value=a,m.value=!0}return(a,d)=>(r(),C(it,null,{default:s(()=>[n("div",Ps,[d[2]||(d[2]=n("div",null,[n("h1",{class:"text-xl font-semibold tracking-tight"}," Robot command queue "),n("p",{class:"text-sm text-muted-foreground"}," Manage and monitor robot commands in real-time ")],-1)),t(e(vt),null,{default:s(()=>[t(e(Ct),null,{default:s(()=>[t(e(yt),{"as-child":""},{default:s(()=>[t(e(P),{variant:"outline",size:"icon"},{default:s(()=>[t(e(te),{class:"w-4 h-4 animate-spin"})]),_:1})]),_:1}),t(e(gt),null,{default:s(()=>d[1]||(d[1]=[n("p",null,"Refreshing in real-time",-1)])),_:1,__:[1]})]),_:1})]),_:1})]),n("div",Gs,[n("div",hs,[t(bs,{onViewDetails:l}),t(Fs,{onViewDetails:l})]),n("div",null,[t(gs)])]),e(o)?(r(),C(Xt,{key:0,"is-open":e(m),"onUpdate:isOpen":d[0]||(d[0]=R=>Ee(m)?m.value=R:null),"command-id":e(o)},null,8,["is-open","command-id"])):T("",!0)]),_:1}))}});export{io as default};
